(self.webpackChunkangulartest=self.webpackChunkangulartest||[]).push([[773],{62773:(ge,U,O)=>{"use strict";O.r(U),O.d(U,{AccountModule:()=>mt,loggerCallback:()=>Nr,protectedResourceMap:()=>Pr});var L=O(24006),P=O(44466),z=O(86630),c=O(94650),X=O(80529),be=O(92340);const K={headers:new X.WM({"Content-Type":"application/x-www-form-urlencoded"})},de=be.N.baseUrl;class ce{http;constructor(e){this.http=e}register(e,t){return this.http.post(de+"/api/Account/Register",`Email=${e}&Password=${t}&ConfirmPassword=${t}`,K).subscribe(o=>{console.log(o),alert("Successful")},o=>console.log("There was an error."))}confirmEmail(e,t){return this.http.get(de+"/api/Account/ConfirmEmail?userId="+e+"&code="+encodeURIComponent(t),K)}login(e,t){return this.http.post(de+"/Token",`grant_type=password&username=${e}&password=${t}`,K).subscribe(o=>{console.log(o),localStorage.setItem("currentUser",JSON.stringify({token:o,name:o.userName})),alert("Successful")},o=>console.log("There was an error."))}static \u0275fac=function(t){return new(t||ce)(c.LFG(X.eN))};static \u0275prov=c.Yz7({token:ce,factory:ce.\u0275fac})}class ue{route;accountService;userId;code;constructor(e,t){this.route=e,this.accountService=t}ngOnInit(){this.route.params.subscribe(e=>{this.userId=e.userId,this.code=e.code}),this.accountService.confirmEmail(this.userId,this.code).subscribe(e=>{console.log(e),alert("Successful")},e=>console.log("There was an error."))}static \u0275fac=function(t){return new(t||ue)(c.Y36(z.gz),c.Y36(ce))};static \u0275cmp=c.Xpm({type:ue,selectors:[["app-account-email-confirmation"]],decls:1,vars:2,template:function(t,r){1&t&&c._uU(0),2&t&&c.AsE("Email Confirmaion: ",r.userId," ",r.code,"\n")}})}var me=O(4859);class G{email;password;confirmPassword;constructor(e,t,r){this.email=e,this.password=t,this.confirmPassword=r}}class Ce{accountService;model=new G("","","");constructor(e){this.accountService=e}ngOnInit(){}submitted=!1;onSubmit(){this.model.password==this.model.confirmPassword&&(this.submitted=!0,this.accountService.register(this.model.email,this.model.password))}static \u0275fac=function(t){return new(t||Ce)(c.Y36(ce))};static \u0275cmp=c.Xpm({type:Ce,selectors:[["app-account-registration"]],decls:26,vars:8,consts:[[1,"container"],[3,"ngSubmit"],["userForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","required","","maxlength","256","name","email","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","password"],["type","password","id","password","required","","maxlength","256","name","password",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","required","","maxlength","256","name","confirmPassword",1,"form-control",3,"ngModel","ngModelChange"],["confirmPassword","ngModel"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0)(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(i){return r.model.email=i}),c.qZA(),c.TgZ(8,"div",7),c._uU(9," Email is required "),c.qZA(),c.TgZ(10,"label",8),c._uU(11,"Password"),c.qZA(),c.TgZ(12,"input",9,10),c.NdJ("ngModelChange",function(i){return r.model.password=i}),c.qZA(),c.TgZ(14,"div",7),c._uU(15," Password is required "),c.qZA(),c.TgZ(16,"label",11),c._uU(17,"Password Confirmation"),c.qZA(),c.TgZ(18,"input",12,13),c.NdJ("ngModelChange",function(i){return r.model.confirmPassword=i}),c.qZA(),c.TgZ(20,"div",7),c._uU(21," Password Confirmation is required "),c.qZA(),c.TgZ(22,"div",7),c._uU(23," Passwords are not the same "),c.qZA()(),c.TgZ(24,"button",14),c._uU(25,"Submit"),c.qZA()()()),2&t){const o=c.MAs(2),i=c.MAs(7),a=c.MAs(13),s=c.MAs(19);c.xp6(6),c.Q6J("ngModel",r.model.email),c.xp6(2),c.Q6J("hidden",i.valid||i.pristine),c.xp6(4),c.Q6J("ngModel",r.model.password),c.xp6(2),c.Q6J("hidden",a.valid||a.pristine),c.xp6(4),c.Q6J("ngModel",r.model.confirmPassword),c.xp6(2),c.Q6J("hidden",s.valid||s.pristine),c.xp6(2),c.Q6J("hidden",(s.valid||s.pristine)&&a.value==s.value),c.xp6(2),c.Q6J("disabled",!o.form.valid||a.value!=s.value)}},dependencies:[L._Y,L.Fj,L.JJ,L.JL,L.Q7,L.nD,L.on,L.On,L.F,me.lW]})}class d{email;password;constructor(e,t){this.email=e,this.password=t}}class f{accountService;model=new d("","");constructor(e){this.accountService=e}ngOnInit(){}submitted=!1;onSubmit(){this.model.password&&(this.submitted=!0,this.accountService.login(this.model.email,this.model.password))}static \u0275fac=function(t){return new(t||f)(c.Y36(ce))};static \u0275cmp=c.Xpm({type:f,selectors:[["app-account-login"]],decls:18,vars:5,consts:[[1,"container"],[3,"ngSubmit"],["userForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","required","","maxlength","256","name","email","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","password"],["type","password","id","password","required","","maxlength","256","name","password",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0)(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(i){return r.model.email=i}),c.qZA(),c.TgZ(8,"div",7),c._uU(9," Email is required "),c.qZA(),c.TgZ(10,"label",8),c._uU(11,"Password"),c.qZA(),c.TgZ(12,"input",9,10),c.NdJ("ngModelChange",function(i){return r.model.password=i}),c.qZA(),c.TgZ(14,"div",7),c._uU(15," Password is required "),c.qZA()(),c.TgZ(16,"button",11),c._uU(17,"Login"),c.qZA()()()),2&t){const o=c.MAs(2),i=c.MAs(7),a=c.MAs(13);c.xp6(6),c.Q6J("ngModel",r.model.email),c.xp6(2),c.Q6J("hidden",i.valid||i.pristine),c.xp6(4),c.Q6J("ngModel",r.model.password),c.xp6(2),c.Q6J("hidden",a.valid||a.pristine),c.xp6(2),c.Q6J("disabled",!o.form.valid)}},dependencies:[L._Y,L.Fj,L.JJ,L.JL,L.Q7,L.nD,L.on,L.On,L.F,me.lW]})}const v=[{path:"",pathMatch:"full",redirectTo:"registration"},{path:"registration",component:Ce},{path:"login",component:f},{path:"email_confirmation/:userId/:code",component:ue}];class I{static \u0275fac=function(t){return new(t||I)};static \u0275mod=c.oAB({type:I});static \u0275inj=c.cJS({imports:[z.Bz.forChild(v),z.Bz]})}function Q(n,e,t,r){var a,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i}function te(n,e){return function(t,r){e(t,r,n)}}var _e=O(591),xe=O(92198),yt=O(24850),Ye=function(n,e){return(Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(n,e)};function ke(n,e){function t(){this.constructor=n}Ye(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Y=function(){return Y=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Y.apply(this,arguments)};function He(n,e,t,r){return new(t||(t=Promise))(function(i,a){function s(S){try{u(r.next(S))}catch(D){a(D)}}function h(S){try{u(r.throw(S))}catch(D){a(D)}}function u(S){S.done?i(S.value):function o(i){return i instanceof t?i:new t(function(a){a(i)})}(S.value).then(s,h)}u((r=r.apply(n,e||[])).next())})}function Pe(n,e){var r,o,i,a,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(S){return function h(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(i=2&u[0]?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){t=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(6===u[0]&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(S){u=[6,S],o=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,S])}}}function Te(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var r=Array(n),o=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var fe=function(){function n(){}return n.createNewGuid=function(){var e=window.crypto;if(e&&e.getRandomValues){var t=new Uint8Array(16);return e.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,n.decimalToHex(t[0])+n.decimalToHex(t[1])+n.decimalToHex(t[2])+n.decimalToHex(t[3])+"-"+n.decimalToHex(t[4])+n.decimalToHex(t[5])+"-"+n.decimalToHex(t[6])+n.decimalToHex(t[7])+"-"+n.decimalToHex(t[8])+n.decimalToHex(t[9])+"-"+n.decimalToHex(t[10])+n.decimalToHex(t[11])+n.decimalToHex(t[12])+n.decimalToHex(t[13])+n.decimalToHex(t[14])+n.decimalToHex(t[15])}for(var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef",i=0,a="",s=0;s<36;s++)"-"!==r[s]&&"4"!==r[s]&&(i=16*Math.random()|0),"x"===r[s]?a+=o[i]:"y"===r[s]?(i&=3,a+=o[i|=8]):a+=r[s];return a},n.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},n.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},n.base64Encode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,o){return String.fromCharCode(Number("0x"+o))}))},n.base64Decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}return decodeURIComponent(atob(t).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))},n.deserialize=function(e){var t,r=/\+/g,o=/([^&=]+)=([^&]*)/g,i=function(s){return decodeURIComponent(s.replace(r," "))},a={};for(t=o.exec(e);t;)a[i(t[1])]=i(t[2]),t=o.exec(e);return a},n}(),m=function(){function n(){}return Object.defineProperty(n,"libraryName",{get:function(){return"Msal.js"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"claims",{get:function(){return"claims"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"clientId",{get:function(){return"clientId"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"cachePrefix",{get:function(){return"msal"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"scopes",{get:function(){return"scopes"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"no_account",{get:function(){return"NO_ACCOUNT"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"upn",{get:function(){return"upn"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"domain_hint",{get:function(){return"domain_hint"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"prompt",{get:function(){return"prompt"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"resourceDelimiter",{get:function(){return"|"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"cacheDelimiter",{get:function(){return"."},enumerable:!1,configurable:!0}),Object.defineProperty(n,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(n,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(n,"login",{get:function(){return"LOGIN"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return"UNKNOWN"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"ADFS",{get:function(){return"adfs"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"homeAccountIdentifier",{get:function(){return"homeAccountIdentifier"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"common",{get:function(){return"common"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"openidScope",{get:function(){return"openid"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"profileScope",{get:function(){return"profile"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"oidcScopes",{get:function(){return[this.openidScope,this.profileScope]},enumerable:!1,configurable:!0}),Object.defineProperty(n,"interactionTypeRedirect",{get:function(){return"redirectInteraction"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"interactionTypePopup",{get:function(){return"popupInteraction"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"interactionTypeSilent",{get:function(){return"silentInteraction"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"inProgress",{get:function(){return"inProgress"},enumerable:!1,configurable:!0}),n._popUpWidth=483,n._popUpHeight=600,n}(),k=(()=>{return(n=k||(k={})).SCOPE="scope",n.STATE="state",n.ERROR="error",n.ERROR_DESCRIPTION="error_description",n.ACCESS_TOKEN="access_token",n.ID_TOKEN="id_token",n.EXPIRES_IN="expires_in",n.SESSION_STATE="session_state",n.CLIENT_INFO="client_info",k;var n})(),ee=(()=>{return(n=ee||(ee={})).AUTHORITY="authority",n.ACQUIRE_TOKEN_ACCOUNT="acquireTokenAccount",n.SESSION_STATE="session.state",n.STATE_LOGIN="state.login",n.STATE_ACQ_TOKEN="state.acquireToken",n.STATE_RENEW="state.renew",n.NONCE_IDTOKEN="nonce.idtoken",n.LOGIN_REQUEST="login.request",n.RENEW_STATUS="token.renew.status",n.URL_HASH="urlHash",n.INTERACTION_STATUS="interaction.status",n.REDIRECT_REQUEST="redirect_request",ee;var n})(),Ne=(()=>{return(n=Ne||(Ne={})).IDTOKEN="idtoken",n.CLIENT_INFO="client.info",Ne;var n})(),Ee=(()=>{return(n=Ee||(Ee={})).LOGIN_ERROR="login.error",n.ERROR="error",n.ERROR_DESC="error.description",Ee;var n})(),Lt=".well-known/openid-configuration",oe=(()=>{return(n=oe||(oe={})).ACCOUNT="account",n.SID="sid",n.LOGIN_HINT="login_hint",n.ORGANIZATIONS="organizations",n.CONSUMERS="consumers",n.ID_TOKEN="id_token",n.ACCOUNT_ID="accountIdentifier",n.HOMEACCOUNT_ID="homeAccountIdentifier",oe;var n})(),$t=[oe.SID,oe.LOGIN_HINT],at={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none"},lt_unexpectedError_code="unexpected_error",lt_unexpectedError_desc="Unexpected error in authentication.",lt_noWindowObjectError_code="no_window_object",lt_noWindowObjectError_desc="No window object available. Details:",Ke=function(n){function e(t,r){var o=n.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.errorCode=t,o.errorMessage=r,o.name="AuthError",o}return ke(e,n),e.createUnexpectedError=function(t){return new e(lt_unexpectedError_code,lt_unexpectedError_desc+": "+t)},e.createNoWindowObjectError=function(t){return new e(lt_noWindowObjectError_code,lt_noWindowObjectError_desc+" "+t)},e}(Error),se=function(){function n(){}return n.isEmpty=function(e){return typeof e>"u"||!e||0===e.length},n.validateAndParseJsonCacheKey=function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch{return null}},n}(),M_endpointResolutionError_code="endpoints_resolution_error",M_endpointResolutionError_desc="Error: could not resolve endpoints. Please check network and try again.",M_popUpWindowError_code="popup_window_error",M_popUpWindowError_desc="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",M_tokenRenewalError_code="token_renewal_error",M_tokenRenewalError_desc="Token renewal operation failed due to timeout.",M_invalidIdToken_code="invalid_id_token",M_invalidIdToken_desc="Invalid ID token format.",M_invalidStateError_code="invalid_state_error",M_invalidStateError_desc="Invalid state.",M_nonceMismatchError_code="nonce_mismatch_error",M_nonceMismatchError_desc="Nonce is not matching, Nonce received: ",M_loginProgressError_code="login_progress_error",M_loginProgressError_desc="Login_In_Progress: Error during login call - login is already in progress.",M_acquireTokenProgressError_code="acquiretoken_progress_error",M_acquireTokenProgressError_desc="AcquireToken_In_Progress: Error during login call - login is already in progress.",M_userCancelledError_code="user_cancelled",M_userCancelledError_desc="User cancelled the flow.",M_callbackError_code="callback_error",M_callbackError_desc="Error occurred in token received callback function.",M_userLoginRequiredError_code="user_login_error",M_userLoginRequiredError_desc="User login is required. For silent calls, request must contain either sid or login_hint",M_userDoesNotExistError_code="user_non_existent",M_userDoesNotExistError_desc="User object does not exist. Please call a login API.",M_clientInfoDecodingError_code="client_info_decoding_error",M_clientInfoDecodingError_desc="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",M_clientInfoNotPopulatedError_code="client_info_not_populated_error",M_clientInfoNotPopulatedError_desc="The service did not populate client_info in the response, Please verify with the service team",M_nullOrEmptyIdToken_code="null_or_empty_id_token",M_nullOrEmptyIdToken_desc="The idToken is null or empty. Please review the trace to determine the root cause.",M_idTokenNotParsed_code="id_token_parsing_error",M_idTokenNotParsed_desc="ID token cannot be parsed. Please review stack trace to determine root cause.",M_tokenEncodingError_code="token_encoding_error",M_tokenEncodingError_desc="The token to be decoded is not encoded correctly.",M_invalidInteractionType_code="invalid_interaction_type",M_invalidInteractionType_desc="The interaction type passed to the handler was incorrect or unknown",M_cacheParseError_code="cannot_parse_cache",M_cacheParseError_desc="The cached token key is not a valid JSON and cannot be parsed",M_blockTokenRequestsInHiddenIframe_code="block_token_requests",M_blockTokenRequestsInHiddenIframe_desc="Token calls are blocked in hidden iframes",ie=function(n){function e(t,r){var o=n.call(this,t,r)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,e.prototype),o}return ke(e,n),e.createEndpointResolutionError=function(t){var r=M_endpointResolutionError_desc;return t&&!se.isEmpty(t)&&(r+=" Details: "+t),new e(M_endpointResolutionError_code,r)},e.createPopupWindowError=function(t){var r=M_popUpWindowError_desc;return t&&!se.isEmpty(t)&&(r+=" Details: "+t),new e(M_popUpWindowError_code,r)},e.createTokenRenewalTimeoutError=function(){return new e(M_tokenRenewalError_code,M_tokenRenewalError_desc)},e.createInvalidIdTokenError=function(t){return new e(M_invalidIdToken_code,M_invalidIdToken_desc+" Given token: "+t)},e.createInvalidStateError=function(t,r){return new e(M_invalidStateError_code,M_invalidStateError_desc+" "+t+", state expected : "+r+".")},e.createNonceMismatchError=function(t,r){return new e(M_nonceMismatchError_code,M_nonceMismatchError_desc+" "+t+", nonce expected : "+r+".")},e.createLoginInProgressError=function(){return new e(M_loginProgressError_code,M_loginProgressError_desc)},e.createAcquireTokenInProgressError=function(){return new e(M_acquireTokenProgressError_code,M_acquireTokenProgressError_desc)},e.createUserCancelledError=function(){return new e(M_userCancelledError_code,M_userCancelledError_desc)},e.createErrorInCallbackFunction=function(t){return new e(M_callbackError_code,M_callbackError_desc+" "+t+".")},e.createUserLoginRequiredError=function(){return new e(M_userLoginRequiredError_code,M_userLoginRequiredError_desc)},e.createUserDoesNotExistError=function(){return new e(M_userDoesNotExistError_code,M_userDoesNotExistError_desc)},e.createClientInfoDecodingError=function(t){return new e(M_clientInfoDecodingError_code,M_clientInfoDecodingError_desc+" Failed with error: "+t)},e.createClientInfoNotPopulatedError=function(t){return new e(M_clientInfoNotPopulatedError_code,M_clientInfoNotPopulatedError_desc+" Failed with error: "+t)},e.createIdTokenNullOrEmptyError=function(t){return new e(M_nullOrEmptyIdToken_code,M_nullOrEmptyIdToken_desc+" Raw ID Token Value: "+t)},e.createIdTokenParsingError=function(t){return new e(M_idTokenNotParsed_code,M_idTokenNotParsed_desc+" Failed with error: "+t)},e.createTokenEncodingError=function(t){return new e(M_tokenEncodingError_code,M_tokenEncodingError_desc+" Attempted to decode: "+t)},e.createInvalidInteractionTypeError=function(){return new e(M_invalidInteractionType_code,M_invalidInteractionType_desc)},e.createCacheParseError=function(t){return new e(M_cacheParseError_code,"invalid key: "+t+", "+M_cacheParseError_desc)},e.createBlockTokenRequestsInHiddenIframeError=function(){return new e(M_blockTokenRequestsInHiddenIframe_code,M_blockTokenRequestsInHiddenIframe_desc)},e}(Ke),W_configurationNotSet_code="no_config_set",W_configurationNotSet_desc="Configuration has not been set. Please call the UserAgentApplication constructor with a valid Configuration object.",W_storageNotSupported_code="storage_not_supported",W_storageNotSupported_desc="The value for the cacheLocation is not supported.",W_noRedirectCallbacksSet_code="no_redirect_callbacks",W_noRedirectCallbacksSet_desc="No redirect callbacks have been set. Please call handleRedirectCallback() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.",W_invalidCallbackObject_code="invalid_callback_object",W_invalidCallbackObject_desc="The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.",W_scopesRequired_code="scopes_required",W_scopesRequired_desc="Scopes are required to obtain an access token.",W_emptyScopes_code="empty_input_scopes_error",W_emptyScopes_desc="Scopes cannot be passed as empty array.",W_nonArrayScopes_code="nonarray_input_scopes_error",W_nonArrayScopes_desc="Scopes cannot be passed as non-array.",W_invalidPrompt_code="invalid_prompt_value",W_invalidPrompt_desc="Supported prompt values are 'login', 'select_account', 'consent' and 'none'",W_invalidAuthorityType={code:"invalid_authority_type",desc:"The given authority is not a valid type of authority supported by MSAL. Please see here for valid authorities: <insert URL here>."},W_authorityUriInsecure={code:"authority_uri_insecure",desc:"Authority URIs must use https."},W_authorityUriInvalidPath={code:"authority_uri_invalid_path",desc:"Given authority URI is invalid."},W_untrustedAuthority_code="untrusted_authority",W_untrustedAuthority_desc="The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter or set validateAuthority=false.",W_b2cKnownAuthoritiesNotSet_code="b2c_known_authorities_not_set",W_b2cKnownAuthoritiesNotSet_desc="Must set known authorities when validateAuthority is set to True and using B2C",W_claimsRequestParsingError_code="claims_request_parsing_error",W_claimsRequestParsingError_desc="Could not parse the given claims request object.",W_emptyRequestError_code="empty_request_error",W_emptyRequestError_desc="Request object is required.",W_invalidCorrelationIdError_code="invalid_guid_sent_as_correlationId",W_invalidCorrelationIdError_desc="Please set the correlationId as a valid guid",W_telemetryConfigError_code="telemetry_config_error",W_telemetryConfigError_desc="Telemetry config is not configured with required values",W_ssoSilentError_code="sso_silent_error",W_ssoSilentError_desc="request must contain either sid or login_hint",W_invalidAuthorityMetadataError_code="authority_metadata_error",W_invalidAuthorityMetadataError_desc="Invalid authorityMetadata. Must be a JSON object containing authorization_endpoint, end_session_endpoint, and issuer fields.",Ie=function(n){function e(t,r){var o=n.call(this,t,r)||this;return o.name="ClientConfigurationError",Object.setPrototypeOf(o,e.prototype),o}return ke(e,n),e.createNoSetConfigurationError=function(){return new e(W_configurationNotSet_code,""+W_configurationNotSet_desc)},e.createStorageNotSupportedError=function(t){return new e(W_storageNotSupported_code,W_storageNotSupported_desc+" Given location: "+t)},e.createRedirectCallbacksNotSetError=function(){return new e(W_noRedirectCallbacksSet_code,W_noRedirectCallbacksSet_desc)},e.createInvalidCallbackObjectError=function(t){return new e(W_invalidCallbackObject_code,W_invalidCallbackObject_desc+" Given value for callback function: "+t)},e.createEmptyScopesArrayError=function(t){return new e(W_emptyScopes_code,W_emptyScopes_desc+" Given value: "+t+".")},e.createScopesNonArrayError=function(t){return new e(W_nonArrayScopes_code,W_nonArrayScopes_desc+" Given value: "+t+".")},e.createScopesRequiredError=function(t){return new e(W_scopesRequired_code,W_scopesRequired_desc+" Given value: "+t)},e.createInvalidPromptError=function(t){return new e(W_invalidPrompt_code,W_invalidPrompt_desc+" Given value: "+t)},e.createClaimsRequestParsingError=function(t){return new e(W_claimsRequestParsingError_code,W_claimsRequestParsingError_desc+" Given value: "+t)},e.createEmptyRequestError=function(){return new e(W_emptyRequestError_code,W_emptyRequestError_desc)},e.createInvalidCorrelationIdError=function(){return new e(W_invalidCorrelationIdError_code,W_invalidCorrelationIdError_desc)},e.createKnownAuthoritiesNotSetError=function(){return new e(W_b2cKnownAuthoritiesNotSet_code,W_b2cKnownAuthoritiesNotSet_desc)},e.createInvalidAuthorityTypeError=function(){return new e(W_invalidAuthorityType.code,W_invalidAuthorityType.desc)},e.createUntrustedAuthorityError=function(t){return new e(W_untrustedAuthority_code,W_untrustedAuthority_desc+" Provided Authority: "+t)},e.createTelemetryConfigError=function(t){var a={applicationName:"string",applicationVersion:"string",telemetryEmitter:"function"};return new e(W_telemetryConfigError_code,W_telemetryConfigError_desc+" mising values: "+Object.keys(a).reduce(function(h,u){return t[u]?h:h.concat([u+" ("+a[u]+")"])},[]).join(","))},e.createSsoSilentError=function(){return new e(W_ssoSilentError_code,W_ssoSilentError_desc)},e.createInvalidAuthorityMetadataError=function(){return new e(W_invalidAuthorityMetadataError_code,W_invalidAuthorityMetadataError_desc)},e}(ie),Oe=function(){function n(){}return n.isIntersectingScopes=function(e,t){for(var r=this.trimAndConvertArrayToLowerCase(Te(e)),o=this.trimAndConvertArrayToLowerCase(Te(t)),i=0;i<o.length;i++)if(r.indexOf(o[i].toLowerCase())>-1)return!0;return!1},n.containsScope=function(e,t){var r=this.trimAndConvertArrayToLowerCase(Te(e));return this.trimAndConvertArrayToLowerCase(Te(t)).every(function(i){return r.indexOf(i.toString().toLowerCase())>=0})},n.trimAndConvertToLowerCase=function(e){return e.trim().toLowerCase()},n.trimAndConvertArrayToLowerCase=function(e){var t=this;return e.map(function(r){return t.trimAndConvertToLowerCase(r)})},n.trimScopes=function(e){return e.map(function(t){return t.trim()})},n.removeElement=function(e,t){var r=this.trimAndConvertToLowerCase(t);return e.filter(function(o){return o!==r})},n.parseScope=function(e){var t="";if(e)for(var r=0;r<e.length;++r)t+=r!==e.length-1?e[r]+" ":e[r];return t},n.validateInputScope=function(e,t){if(e){if(!Array.isArray(e))throw Ie.createScopesNonArrayError(e);if(e.length<1&&t)throw Ie.createEmptyScopesArrayError(e.toString())}else if(t)throw Ie.createScopesRequiredError(e)},n.getScopeFromState=function(e){if(e){var t=e.indexOf(m.resourceDelimiter);if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},n.appendScopes=function(e,t){if(e){var r=t?this.trimAndConvertArrayToLowerCase(Te(t)):null,o=this.trimAndConvertArrayToLowerCase(Te(e));return r?Te(o,r):o}return null},n.onlyContainsOidcScopes=function(e){var t=e.length,r=0;return e.indexOf(m.openidScope)>-1&&(r+=1),e.indexOf(m.profileScope)>-1&&(r+=1),t>0&&t===r},n.containsAnyOidcScopes=function(e){var t=e.indexOf(m.openidScope)>-1,r=e.indexOf(m.profileScope)>-1;return t||r},n.onlyContainsClientId=function(e,t){return!!e&&e.indexOf(t)>-1&&1===e.length},n.appendDefaultScopes=function(e){var t=e;return-1===t.indexOf(m.openidScope)&&t.push(m.openidScope),-1===t.indexOf(m.profileScope)&&t.push(m.profileScope),t},n.removeDefaultScopes=function(e){return e.filter(function(t){return t!==m.openidScope&&t!==m.profileScope})},n.translateClientIdIfSingleScope=function(e,t){return this.onlyContainsClientId(e,t)?m.oidcScopes:e},n}(),H=function(){function n(){}return n.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),r=e.authorityInstance.AuthorizationEndpoint;return r.indexOf("?")<0?r+="?":r+="&",""+r+t.join("&")},n.createNavigationUrlString=function(e){var t=Oe.appendDefaultScopes(e.scopes),r=[];return r.push("response_type="+e.responseType),r.push("scope="+encodeURIComponent(Oe.parseScope(t))),r.push("client_id="+encodeURIComponent(e.clientId)),r.push("redirect_uri="+encodeURIComponent(e.redirectUri)),r.push("state="+encodeURIComponent(e.state)),r.push("nonce="+encodeURIComponent(e.nonce)),r.push("client_info=1"),r.push("x-client-SKU="+e.xClientSku),r.push("x-client-Ver="+e.xClientVer),e.promptValue&&r.push("prompt="+encodeURIComponent(e.promptValue)),e.claimsValue&&r.push("claims="+encodeURIComponent(e.claimsValue)),e.queryParameters&&r.push(e.queryParameters),e.extraQueryParameters&&r.push(e.extraQueryParameters),r.push("client-request-id="+encodeURIComponent(e.correlationId)),r},n.getCurrentUrl=function(){return window.location.href.split("?")[0].split("#")[0]},n.removeHashFromUrl=function(e){return e.split("#")[0]},n.replaceTenantPath=function(e,t){var r=e.toLowerCase(),o=this.GetUrlComponents(r),i=o.PathSegments;return t&&0!==i.length&&(i[0]===m.common||i[0]===oe.ORGANIZATIONS||i[0]===oe.CONSUMERS)&&(i[0]=t),this.constructAuthorityUriFromObject(o,i)},n.constructAuthorityUriFromObject=function(e,t){return this.CanonicalizeUri(e.Protocol+"//"+e.HostNameAndPort+"/"+t.join("/"))},n.isCommonAuthority=function(e){var t=this.CanonicalizeUri(e),r=this.GetUrlComponents(t).PathSegments;return 0!==r.length&&r[0]===m.common},n.isOrganizationsAuthority=function(e){var t=this.CanonicalizeUri(e),r=this.GetUrlComponents(t).PathSegments;return 0!==r.length&&r[0]===oe.ORGANIZATIONS},n.isConsumersAuthority=function(e){var t=this.CanonicalizeUri(e),r=this.GetUrlComponents(t).PathSegments;return 0!==r.length&&r[0]===oe.CONSUMERS},n.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t);if(!r||r.length<6)throw"Valid url required";var o={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5]},i=o.AbsolutePath.split("/");return i=i.filter(function(a){return a&&a.length>0}),o.PathSegments=i,r[6]&&(o.Search=r[6]),r[8]&&(o.Hash=r[8]),o},n.CanonicalizeUri=function(e){if(e){var t=e.toLowerCase();return n.endsWith(t,"/")||(t+="/"),t}return e},n.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},n.urlRemoveQueryStringParameter=function(e,t){if(se.isEmpty(e))return e;var o=new RegExp("(\\&"+t+"=)[^&]+");return e.replace(o,""),o=new RegExp("("+t+"=)[^&]+&"),e.replace(o,""),o=new RegExp("("+t+"=)[^&]+"),e.replace(o,"")},n.getHashFromUrl=function(e){var t=e.indexOf("#"),r=e.indexOf("#/");return r>-1?e.substring(r+2):t>-1?e.substring(t+1):e},n.urlContainsHash=function(e){var t=n.deserializeHash(e);return t.hasOwnProperty(k.ERROR_DESCRIPTION)||t.hasOwnProperty(k.ERROR)||t.hasOwnProperty(k.ACCESS_TOKEN)||t.hasOwnProperty(k.ID_TOKEN)},n.deserializeHash=function(e){var t=n.getHashFromUrl(e);return fe.deserialize(t)},n.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t.split("/")[0]},n}(),Yt=function n(e,t,r,o,i){this.authority=H.CanonicalizeUri(e),this.clientId=t,this.scopes=r,this.homeAccountIdentifier=fe.base64Encode(o)+"."+fe.base64Encode(i)},Xt=function n(e,t,r,o){this.accessToken=e,this.idToken=t,this.expiresIn=r,this.homeAccountIdentifier=o},ht="1.4.17",Ze=function(){function n(e,t,r,o,i,a,s){this.authorityInstance=e,this.clientId=t,this.nonce=fe.createNewGuid(),this.scopes=i?Te(i):m.oidcScopes,this.scopes=Oe.trimScopes(this.scopes),this.state=a,this.correlationId=s,this.xClientSku="MSAL.JS",this.xClientVer=ht,this.responseType=r,this.redirectUri=o}return Object.defineProperty(n.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!1,configurable:!0}),n.prototype.populateQueryParams=function(e,t,r,o){var i={};t&&(t.prompt&&(this.promptValue=t.prompt),t.claimsRequest&&(this.claimsValue=t.claimsRequest),n.isSSOParam(t)&&(i=this.constructUnifiedCacheQueryParameter(t,null))),r&&(i=this.constructUnifiedCacheQueryParameter(null,r)),i=this.addHintParameters(e,i);var a=t?t.extraQueryParameters:null;this.queryParameters=n.generateQueryParametersString(i),this.extraQueryParameters=n.generateQueryParametersString(a,o)},n.prototype.constructUnifiedCacheQueryParameter=function(e,t){var r,o,i;if(e)if(e.account){var s=e.account;null!==(r=s.idTokenClaims)&&void 0!==r&&r.login_hint?(o=oe.LOGIN_HINT,i=s.idTokenClaims.login_hint):s.sid?(o=oe.SID,i=s.sid):s.userName&&(o=oe.LOGIN_HINT,i=s.userName)}else e.sid?(o=oe.SID,i=e.sid):e.loginHint&&(o=oe.LOGIN_HINT,i=e.loginHint);else t&&t.hasOwnProperty(m.upn)&&(o=oe.ID_TOKEN,i=t.upn);return this.addSSOParameter(o,i)},n.prototype.addHintParameters=function(e,t){var r,o,i=t;return e&&!i[oe.SID]&&!i[oe.LOGIN_HINT]&&(null!==(r=e.idTokenClaims)&&void 0!==r&&r.login_hint?i=this.addSSOParameter(oe.LOGIN_HINT,null===(o=e.idTokenClaims)||void 0===o?void 0:o.login_hint,i):e.sid&&this.promptValue===at.NONE?i=this.addSSOParameter(oe.SID,e.sid,i):e.userName&&(i=this.addSSOParameter(oe.LOGIN_HINT,e.userName,i))),i},n.prototype.addSSOParameter=function(e,t,r){var o=r||{};if(!t)return o;switch(e){case oe.SID:o[oe.SID]=t;break;case oe.ID_TOKEN:case oe.LOGIN_HINT:o[oe.LOGIN_HINT]=t}return o},n.generateQueryParametersString=function(e,t){var r=null;return e&&Object.keys(e).forEach(function(o){o===m.domain_hint&&(t||e[oe.SID])||(r?r+="&"+o+"="+encodeURIComponent(e[o]):r=o+"="+encodeURIComponent(e[o]))}),r},n.isSSOParam=function(e){return!(!e||!(e.account||e.sid||e.loginHint))},n.determineResponseType=function(e,t){return Oe.onlyContainsOidcScopes(t)?"id_token":e?this.responseTypeForMatchingAccounts(t):"id_token token"},n.responseTypeForMatchingAccounts=function(e){return Oe.containsAnyOidcScopes(e)?"id_token token":"token"},n}(),jt=function(){function n(){}return n.prototype.sendRequestAsync=function(e,t,r){var o=this;return new Promise(function(i,a){var s=new XMLHttpRequest;if(s.open(t,e,!0),s.onload=function(){var h;(s.status<200||s.status>=300)&&a(o.handleError(s.responseText));try{h=JSON.parse(s.responseText)}catch{a(o.handleError(s.responseText))}i({statusCode:s.status,body:h})},s.onerror=function(){a(s.status)},"GET"!==t)throw"not implemented";s.send()})},n.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch{return e}},n}(),dt=function(){function n(){}return n.setTrustedAuthoritiesFromConfig=function(e,t){e&&!this.getTrustedHostList().length&&t.forEach(function(r){n.TrustedHostList.push(r.toLowerCase())})},n.getAliases=function(e,t,r){return He(this,void 0,void 0,function(){var o,a,s;return Pe(this,function(h){return o=new jt,s=t.createAndStartHttpEvent(r,"GET",a="https://login.microsoftonline.com/common//discovery/instance?api-version=1.1&authorization_endpoint="+e+"oauth2/v2.0/authorize","getAliases"),[2,o.sendRequestAsync(a,"GET",!0).then(function(u){return s.httpResponseStatus=u.statusCode,t.stopEvent(s),u.body.metadata}).catch(function(u){throw s.serverErrorCode=u,t.stopEvent(s),u})]})})},n.setTrustedAuthoritiesFromNetwork=function(e,t,r){return He(this,void 0,void 0,function(){var i;return Pe(this,function(a){switch(a.label){case 0:return[4,this.getAliases(e,t,r)];case 1:return a.sent().forEach(function(s){s.aliases.forEach(function(u){n.TrustedHostList.push(u.toLowerCase())})}),i=H.GetUrlComponents(e).HostNameAndPort,n.getTrustedHostList().length&&!n.IsInTrustedHostList(i)&&n.TrustedHostList.push(i.toLowerCase()),[2]}})})},n.getTrustedHostList=function(){return this.TrustedHostList},n.IsInTrustedHostList=function(e){return this.TrustedHostList.indexOf(e.toLowerCase())>-1},n.TrustedHostList=[],n}(),Qe=(()=>{return(n=Qe||(Qe={}))[n.Default=0]="Default",n[n.Adfs=1]="Adfs",Qe;var n})(),Dt=function(){function n(e,t,r){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri(),this.tenantDiscoveryResponse=r}return n.isAdfs=function(e){var r=H.GetUrlComponents(e).PathSegments;return r.length&&r[0].toLowerCase()===m.ADFS},Object.defineProperty(n.prototype,"AuthorityType",{get:function(){return n.isAdfs(this.canonicalAuthority)?Qe.Adfs:Qe.Default},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace(/{tenant}|{tenantid}/g,this.Tenant)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace(/{tenant}|{tenantid}/g,this.Tenant)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace(/{tenant}|{tenantid}/g,this.Tenant)},enumerable:!1,configurable:!0}),n.prototype.validateResolved=function(){if(!this.hasCachedMetadata())throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(n.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=H.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=H.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.AuthorityType===Qe.Adfs?""+this.CanonicalAuthority+Lt:this.CanonicalAuthority+"v2.0/"+Lt},enumerable:!1,configurable:!0}),n.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch{throw W_invalidAuthorityType}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw W_authorityUriInsecure;if(!e.PathSegments||e.PathSegments.length<1)throw W_authorityUriInvalidPath},n.prototype.DiscoverEndpoints=function(e,t,r){var o=new jt,a=t.createAndStartHttpEvent(r,"GET",e,"openIdConfigurationEndpoint");return o.sendRequestAsync(e,"GET",!0).then(function(s){return a.httpResponseStatus=s.statusCode,t.stopEvent(a),{AuthorizationEndpoint:s.body.authorization_endpoint,EndSessionEndpoint:s.body.end_session_endpoint,Issuer:s.body.issuer}}).catch(function(s){throw a.serverErrorCode=s,t.stopEvent(a),s})},n.prototype.resolveEndpointsAsync=function(e,t){return He(this,void 0,void 0,function(){var r,o,i;return Pe(this,function(a){switch(a.label){case 0:return this.IsValidationEnabled?(r=this.canonicalAuthorityUrlComponents.HostNameAndPort,0!==dt.getTrustedHostList().length?[3,2]:[4,dt.setTrustedAuthoritiesFromNetwork(this.canonicalAuthority,e,t)]):[3,3];case 1:a.sent(),a.label=2;case 2:if(!dt.IsInTrustedHostList(r))throw Ie.createUntrustedAuthorityError(r);a.label=3;case 3:return o=this.GetOpenIdConfigurationEndpoint(),i=this,[4,this.DiscoverEndpoints(o,e,t)];case 4:return i.tenantDiscoveryResponse=a.sent(),[2,this.tenantDiscoveryResponse]}})})},n.prototype.hasCachedMetadata=function(){return!!(this.tenantDiscoveryResponse&&this.tenantDiscoveryResponse.AuthorizationEndpoint&&this.tenantDiscoveryResponse.EndSessionEndpoint&&this.tenantDiscoveryResponse.Issuer)},n.prototype.GetOpenIdConfigurationEndpoint=function(){return this.DefaultOpenIdConfigurationEndpoint},n}(),et=function(){function n(e,t){if(!e||se.isEmpty(e))return this.uid="",void(this.utid="");try{var r=fe.base64Decode(e),o=JSON.parse(r);o&&(o.hasOwnProperty("uid")&&(this.uid=t?n.stripPolicyFromUid(o.uid,t):o.uid),o.hasOwnProperty("utid")&&(this.utid=o.utid))}catch(i){throw ie.createClientInfoDecodingError(i)}}return Object.defineProperty(n.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!1,configurable:!0}),n.createClientInfoFromIdToken=function(e,t){return new n(fe.base64Encode(JSON.stringify({uid:e.subject,utid:""})),t)},n.stripPolicyFromUid=function(e,t){var r=e.split("-"),o=t.split("/").reverse(),i="";return se.isEmpty(o[0])?o.length>1&&(i=o[1]):i=o[0],r[r.length-1]===i?r.slice(0,r.length-1).join("-"):e},n.prototype.encodeClientInfo=function(){var e=JSON.stringify({uid:this.uid,utid:this.utid});return fe.base64Encode(e)},n}(),tt=function(){function n(){}return n.parseExpiresIn=function(e){return parseInt(e||"3599",10)},n.now=function(){return Math.round((new Date).getTime()/1e3)},n.relativeNowMs=function(){return window.performance.now()},n}(),ft=function(){function n(){}return n.decodeJwt=function(e){if(se.isEmpty(e))return null;var r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!r||r.length<4?null:{header:r[1],JWSPayload:r[2],JWSSig:r[3]}},n.validateExpirationIsWithinOffset=function(e,t){var r=t||300;return e&&e>tt.now()+r},n.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var o=fe.base64Decode(t.JWSPayload);return o?JSON.parse(o):null}catch{}return null},n}(),$e=function n(e){if(se.isEmpty(e))throw ie.createIdTokenNullOrEmptyError(e);try{this.rawIdToken=e,this.claims=ft.extractIdToken(e),this.claims&&(this.claims.hasOwnProperty("iss")&&(this.issuer=this.claims.iss),this.claims.hasOwnProperty("oid")&&(this.objectId=this.claims.oid),this.claims.hasOwnProperty("sub")&&(this.subject=this.claims.sub),this.claims.hasOwnProperty("tid")&&(this.tenantId=this.claims.tid),this.claims.hasOwnProperty("ver")&&(this.version=this.claims.ver),this.claims.hasOwnProperty("preferred_username")?this.preferredName=this.claims.preferred_username:this.claims.hasOwnProperty("upn")&&(this.preferredName=this.claims.upn),this.claims.hasOwnProperty("name")&&(this.name=this.claims.name),this.claims.hasOwnProperty("nonce")&&(this.nonce=this.claims.nonce),this.claims.hasOwnProperty("exp")&&(this.expiration=this.claims.exp),this.claims.hasOwnProperty("home_oid")&&(this.homeObjectId=this.claims.home_oid),this.claims.hasOwnProperty("sid")&&(this.sid=this.claims.sid),this.claims.hasOwnProperty("cloud_instance_host_name")&&(this.cloudInstance=this.claims.cloud_instance_host_name))}catch(t){throw ie.createIdTokenParsingError(t)}},er=function n(e,t){this.key=e,this.value=t},Ft=function(){function n(e){if(!window)throw Ke.createNoWindowObjectError("Browser storage class could not find window object");if(!(typeof window[e]<"u"&&null!==window[e]))throw Ie.createStorageNotSupportedError(e);this.cacheLocation=e}return n.prototype.setItem=function(e,t,r){window[this.cacheLocation].setItem(e,t),r&&this.setItemCookie(e,t)},n.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this.cacheLocation].getItem(e)},n.prototype.removeItem=function(e){return window[this.cacheLocation].removeItem(e)},n.prototype.clear=function(){return window[this.cacheLocation].clear()},n.prototype.setItemCookie=function(e,t,r){var o=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/;";r&&(o+="expires="+this.getCookieExpirationTime(r)+";"),document.cookie=o},n.prototype.getItemCookie=function(e){for(var t=encodeURIComponent(e)+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var i=r[o];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return""},n.prototype.clearItemCookie=function(e){this.setItemCookie(e,"",-1)},n.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},n}(),je=function(){function n(){}return n.validateRequest=function(e,t,r,o){if(!t&&!e)throw Ie.createEmptyRequestError();var i,a;e&&(i=t?Oe.appendScopes(e.scopes,e.extraScopesToConsent):e.scopes,Oe.validateInputScope(i,!t),i=Oe.translateClientIdIfSingleScope(i,r),this.validatePromptParameter(e.prompt),a=this.validateEQParameters(e.extraQueryParameters,e.claimsRequest),this.validateClaimsRequest(e.claimsRequest));var s=this.validateAndGenerateState(e&&e.state,o),h=this.validateAndGenerateCorrelationId(e&&e.correlationId);return Y(Y({},e),{extraQueryParameters:a,scopes:i,state:s,correlationId:h})},n.validatePromptParameter=function(e){if(e&&[at.LOGIN,at.SELECT_ACCOUNT,at.CONSENT,at.NONE].indexOf(e)<0)throw Ie.createInvalidPromptError(e)},n.validateEQParameters=function(e,t){var r=Y({},e);return r?(t&&delete r[m.claims],$t.forEach(function(o){r[o]&&delete r[o]}),r):null},n.validateClaimsRequest=function(e){if(e)try{JSON.parse(e)}catch(t){throw Ie.createClaimsRequestParsingError(t)}},n.validateAndGenerateState=function(e,t){return se.isEmpty(e)?n.generateLibraryState(t):""+n.generateLibraryState(t)+m.resourceDelimiter+e},n.generateLibraryState=function(e){var t={id:fe.createNewGuid(),ts:tt.now(),method:e},r=JSON.stringify(t);return fe.base64Encode(r)},n.parseLibraryState=function(e){var t=decodeURIComponent(e).split(m.resourceDelimiter)[0];if(fe.isGuid(t))return{id:t,ts:tt.now(),method:m.interactionTypeRedirect};try{var r=fe.base64Decode(t);return JSON.parse(r)}catch{throw ie.createInvalidStateError(e,null)}},n.validateAndGenerateCorrelationId=function(e){if(e&&!fe.isGuid(e))throw Ie.createInvalidCorrelationIdError();return fe.isGuid(e)?e:fe.createNewGuid()},n.createRequestSignature=function(e){return""+e.scopes.join(" ").toLowerCase()+m.resourceDelimiter+e.authority},n}(),he=function(n){function e(t,r,o){var i=n.call(this,r)||this;return i.temporaryCache=new Ft("sessionStorage"),i.clientId=t,i.rollbackEnabled=!0,i.migrateCacheEntries(o),i}return ke(e,n),e.prototype.migrateCacheEntries=function(t){var u,r=this,i=m.cachePrefix+"."+Ne.CLIENT_INFO,a=m.cachePrefix+"."+Ee.ERROR,s=m.cachePrefix+"."+Ee.ERROR_DESC,h=n.prototype.getItem.call(this,m.cachePrefix+"."+Ne.IDTOKEN);if(h)try{u=new $e(h)}catch{return}if(u&&u.claims&&u.claims.aud===this.clientId){var q=[h,n.prototype.getItem.call(this,i),n.prototype.getItem.call(this,a),n.prototype.getItem.call(this,s)];[Ne.IDTOKEN,Ne.CLIENT_INFO,Ee.ERROR,Ee.ERROR_DESC].forEach(function(pe,De){return r.duplicateCacheEntry(pe,q[De],t)})}},e.prototype.duplicateCacheEntry=function(t,r,o){r&&this.setItem(t,r,o)},e.prototype.generateCacheKey=function(t,r){try{return JSON.parse(t),t}catch{return 0===t.indexOf(""+m.cachePrefix)||0===t.indexOf(m.adalIdToken)?t:r?m.cachePrefix+"."+this.clientId+"."+t:m.cachePrefix+"."+t}},e.prototype.matchKeyForType=function(t,r,o,i){var a=se.validateAndParseJsonCacheKey(t);if(!a)return null;var s=t.match(r)&&t.match(o),h=!1;switch(i){case k.ACCESS_TOKEN:h=!!t.match(m.scopes);break;case k.ID_TOKEN:h=!t.match(m.scopes)}return s&&h?a:null},e.prototype.setItem=function(t,r,o){n.prototype.setItem.call(this,this.generateCacheKey(t,!0),r,o),this.rollbackEnabled&&!o&&n.prototype.setItem.call(this,this.generateCacheKey(t,!1),r,o)},e.prototype.getItem=function(t,r){return n.prototype.getItem.call(this,this.generateCacheKey(t,!0),r)},e.prototype.removeItem=function(t){this.temporaryCache.removeItem(this.generateCacheKey(t,!0)),n.prototype.removeItem.call(this,this.generateCacheKey(t,!0)),this.rollbackEnabled&&n.prototype.removeItem.call(this,this.generateCacheKey(t,!1))},e.prototype.setTemporaryItem=function(t,r,o){this.temporaryCache.setItem(this.generateCacheKey(t,!0),r,o)},e.prototype.getTemporaryItem=function(t,r){return this.temporaryCache.getItem(this.generateCacheKey(t,!0),r)},e.prototype.resetCacheItems=function(){var r,t=window[this.cacheLocation];for(r in t)t.hasOwnProperty(r)&&-1!==r.indexOf(m.cachePrefix)&&n.prototype.removeItem.call(this,r)},e.prototype.resetTempCacheItems=function(t){var r=this,o=t&&je.parseLibraryState(t).id,i=this.tokenRenewalInProgress(t),a=window[this.cacheLocation];o&&!i&&Object.keys(a).forEach(function(s){-1!==s.indexOf(o)&&(r.removeItem(s),n.prototype.clearItemCookie.call(r,s))}),this.setInteractionInProgress(!1),this.removeItem(ee.REDIRECT_REQUEST)},e.prototype.setItemCookie=function(t,r,o){n.prototype.setItemCookie.call(this,this.generateCacheKey(t,!0),r,o),this.rollbackEnabled&&n.prototype.setItemCookie.call(this,this.generateCacheKey(t,!1),r,o)},e.prototype.clearItemCookie=function(t){n.prototype.clearItemCookie.call(this,this.generateCacheKey(t,!0)),this.rollbackEnabled&&n.prototype.clearItemCookie.call(this,this.generateCacheKey(t,!1))},e.prototype.getItemCookie=function(t){return n.prototype.getItemCookie.call(this,this.generateCacheKey(t,!0))},e.prototype.getAllTokensByType=function(t,r,o){var i=this;return Object.keys(window[this.cacheLocation]).reduce(function(s,h){var u=i.matchKeyForType(h,t,r,o);if(u){var S=i.getItem(h);if(S)try{var D=new er(u,JSON.parse(S));return s.concat([D])}catch{return s}}return s},[])},e.prototype.getAllAccessTokens=function(t,r){return this.getAllTokensByType(t,r,k.ACCESS_TOKEN)},e.prototype.getAllIdTokens=function(t,r){return this.getAllTokensByType(t,r,k.ID_TOKEN)},e.prototype.getAllTokens=function(t,r){return Te(this.getAllAccessTokens(t,r),this.getAllIdTokens(t,r))},e.prototype.isInteractionInProgress=function(t){var r=this.getInteractionInProgress();return t?r===this.clientId:!!r},e.prototype.getInteractionInProgress=function(){return this.getTemporaryItem(this.generateCacheKey(ee.INTERACTION_STATUS,!1))},e.prototype.setInteractionInProgress=function(t){if(t){if(this.isInteractionInProgress(!1))throw ie.createAcquireTokenInProgressError();this.setTemporaryItem(this.generateCacheKey(ee.INTERACTION_STATUS,!1),this.clientId)}else!t&&this.isInteractionInProgress(!0)&&this.removeItem(this.generateCacheKey(ee.INTERACTION_STATUS,!1))},e.prototype.tokenRenewalInProgress=function(t){var r=this.getItem(e.generateTemporaryCacheKey(ee.RENEW_STATUS,t));return!(!r||r!==m.inProgress)},e.prototype.clearMsalCookie=function(t){var r=this;t?(this.clearItemCookie(e.generateTemporaryCacheKey(ee.NONCE_IDTOKEN,t)),this.clearItemCookie(e.generateTemporaryCacheKey(ee.STATE_LOGIN,t)),this.clearItemCookie(e.generateTemporaryCacheKey(ee.LOGIN_REQUEST,t)),this.clearItemCookie(e.generateTemporaryCacheKey(ee.STATE_ACQ_TOKEN,t))):document.cookie.split(";").forEach(function(i){var a=i.trim().split("=")[0];a.indexOf(m.cachePrefix)>-1&&n.prototype.clearItemCookie.call(r,a)})},e.generateAcquireTokenAccountKey=function(t,r){var o=je.parseLibraryState(r).id;return""+ee.ACQUIRE_TOKEN_ACCOUNT+m.resourceDelimiter+t+m.resourceDelimiter+o},e.generateAuthorityKey=function(t){return e.generateTemporaryCacheKey(ee.AUTHORITY,t)},e.generateTemporaryCacheKey=function(t,r){var o=je.parseLibraryState(r).id;return""+t+m.resourceDelimiter+o},e}(Ft),rt=function(){function n(e,t,r,o,i,a,s){this.accountIdentifier=e,this.homeAccountIdentifier=t,this.userName=r,this.name=o,this.idToken=i,this.idTokenClaims=i,this.sid=a,this.environment=s}return n.createAccount=function(e,t){var a,r=e.objectId||e.subject,o=t?t.uid:"",i=t?t.utid:"";return se.isEmpty(o)||(a=se.isEmpty(i)?fe.base64Encode(o):fe.base64Encode(o)+"."+fe.base64Encode(i)),new n(r,a,e.preferredName,e.name,e.claims,e.sid,e.issuer)},n.compareAccounts=function(e,t){return!!(e&&t&&e.homeAccountIdentifier&&t.homeAccountIdentifier&&e.homeAccountIdentifier===t.homeAccountIdentifier)},n}(),Se=function(){function n(){}return n.isInIframe=function(){return window.parent!==window},n.isInPopup=function(){return!(!window.opener||window.opener===window)},n.generateFrameName=function(e,t){return""+e+m.resourceDelimiter+t},n.monitorIframeForHash=function(e,t,r,o){return new Promise(function(i,a){var h=tt.relativeNowMs()+t;o.verbose("monitorWindowForIframe polling started");var u=setInterval(function(){if(tt.relativeNowMs()>h)return o.error("monitorIframeForHash unable to find hash in url, timing out"),o.errorPii("monitorIframeForHash polling timed out for url: "+r),clearInterval(u),void a(ie.createTokenRenewalTimeoutError());var S;try{S=e.location.href}catch{}S&&H.urlContainsHash(S)&&(o.verbose("monitorIframeForHash found url in hash"),clearInterval(u),i(e.location.hash))},n.POLLING_INTERVAL_MS)})},n.monitorPopupForHash=function(e,t,r,o){return new Promise(function(i,a){var s=t/n.POLLING_INTERVAL_MS,h=0;o.verbose("monitorWindowForHash polling started");var u=setInterval(function(){if(e.closed)return o.error("monitorWindowForHash window closed"),clearInterval(u),void a(ie.createUserCancelledError());var S;try{S=e.location.href}catch{}if(S&&"about:blank"!==S)if(h++,S&&H.urlContainsHash(S)){o.verbose("monitorPopupForHash found url in hash"),clearInterval(u);var D=e.location.hash;n.clearUrlFragment(e),i(D)}else h>s&&(o.error("monitorPopupForHash unable to find hash in url, timing out"),o.errorPii("monitorPopupForHash polling timed out for url: "+r),clearInterval(u),a(ie.createTokenRenewalTimeoutError()))},n.POLLING_INTERVAL_MS)})},n.loadFrame=function(e,t,r,o){var i=this;return o.infoPii("LoadFrame: "+t),new Promise(function(a,s){setTimeout(function(){var h=i.loadFrameSync(e,t,o);h?a(h):s("Unable to load iframe with name: "+t)},r)})},n.loadFrameSync=function(e,t,r){var o=n.addHiddenIFrame(t,r);return o?((""===o.src||"about:blank"===o.src)&&(o.src=e,r.infoPii("Frame Name : "+t+" Navigated to: "+e)),o):null},n.addHiddenIFrame=function(e,t){if(typeof e>"u")return null;t.info("Add msal iframe to document"),t.infoPii("Add msal frame to document:"+e);var r=document.getElementById(e);if(r)t.verbose("Add msal iframe already exists");else{t.verbose("Add msal iframe does not exist");var o=document.createElement("iframe");o.setAttribute("id",e),o.setAttribute("aria-hidden","true"),o.style.visibility="hidden",o.style.position="absolute",o.style.width=o.style.height="0",o.style.border="0",o.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),r=document.getElementsByTagName("body")[0].appendChild(o)}return r},n.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},n.getIframeWithHash=function(e){var t=document.getElementsByTagName("iframe");return Array.apply(null,Array(t.length)).map(function(o,i){return t.item(i)}).filter(function(o){try{return o.contentWindow.location.hash===e}catch{return!1}})[0]},n.getPopups=function(){return window.openedWindows||(window.openedWindows=[]),window.openedWindows},n.getPopUpWithHash=function(e){return n.getPopups().filter(function(t){try{return t.location.hash===e}catch{return!1}})[0]},n.trackPopup=function(e){n.getPopups().push(e)},n.closePopups=function(){n.getPopups().forEach(function(e){return e.close()})},n.blockReloadInHiddenIframes=function(){if(H.urlContainsHash(window.location.hash)&&n.isInIframe())throw ie.createBlockTokenRequestsInHiddenIframeError()},n.checkIfBackButtonIsPressed=function(e){var t=e.getItem(ee.REDIRECT_REQUEST);if(t&&!H.urlContainsHash(window.location.hash)){var r=t.split(m.resourceDelimiter);r.shift();var o=r.length>0?r.join(m.resourceDelimiter):null;e.resetTempCacheItems(o)}},n.clearUrlFragment=function(e){e.location.hash="","function"==typeof e.history.replaceState&&e.history.replaceState(null,null,""+e.location.pathname+e.location.search)},n.POLLING_INTERVAL_MS=50,n}(),It=function(){function n(){}return n.setResponseIdToken=function(e,t){if(!e)return null;if(!t)return e;var r=Number(t.expiration);return r&&!e.expiresOn&&(e.expiresOn=new Date(1e3*r)),Y(Y({},e),{idToken:t,idTokenClaims:t.claims,uniqueId:t.objectId||t.subject,tenantId:t.tenantId})},n.buildAuthResponse=function(e,t,r,o,i,a){switch(r.responseType){case"id_token":var s=Y(Y({},t),{tokenType:k.ID_TOKEN,account:o,scopes:i,accountState:a});return(s=n.setResponseIdToken(s,e)).idToken?s:null;case"id_token token":var h=n.setResponseIdToken(t,e);return h&&h.accessToken&&h.idToken?h:null;case"token":return n.setResponseIdToken(t,e);default:return null}},n}(),qe=function(){function n(){}return n.saveMetadataFromNetwork=function(e,t,r){return He(this,void 0,void 0,function(){var o;return Pe(this,function(i){switch(i.label){case 0:return[4,e.resolveEndpointsAsync(t,r)];case 1:return o=i.sent(),this.metadataMap.set(e.CanonicalAuthority,o),[2,o]}})})},n.getMetadata=function(e){return this.metadataMap.get(e)},n.saveMetadataFromConfig=function(e,t){try{if(t){var r=JSON.parse(t);if(!r.authorization_endpoint||!r.end_session_endpoint||!r.issuer)throw Ie.createInvalidAuthorityMetadataError();this.metadataMap.set(e,{AuthorizationEndpoint:r.authorization_endpoint,EndSessionEndpoint:r.end_session_endpoint,Issuer:r.issuer})}}catch{throw Ie.createInvalidAuthorityMetadataError()}},n.CreateInstance=function(e,t,r){return se.isEmpty(e)?null:(r&&this.saveMetadataFromConfig(e,r),new Dt(e,t,this.metadataMap.get(e)))},n.metadataMap=new Map,n}(),Ae=(()=>{return(n=Ae||(Ae={}))[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",Ae;var n})(),tr=function(){function n(e,t){void 0===t&&(t={}),this.level=Ae.Info;var r=t.correlationId,o=void 0===r?"":r,i=t.level,a=void 0===i?Ae.Info:i,s=t.piiLoggingEnabled,h=void 0!==s&&s;this.localCallback=e,this.correlationId=o,this.level=a,this.piiLoggingEnabled=h}return n.prototype.logMessage=function(e,t,r){if(!(e>this.level||!this.piiLoggingEnabled&&r)){var i,o=(new Date).toUTCString();i=se.isEmpty(this.correlationId)?o+":"+ht+"-"+Ae[e]+(r?"-pii":"")+" "+t:o+":"+this.correlationId+"-"+ht+"-"+Ae[e]+(r?"-pii":"")+" "+t,this.executeCallback(e,i,r)}},n.prototype.executeCallback=function(e,t,r){this.localCallback&&this.localCallback(e,t,r)},n.prototype.error=function(e){this.logMessage(Ae.Error,e,!1)},n.prototype.errorPii=function(e){this.logMessage(Ae.Error,e,!0)},n.prototype.warning=function(e){this.logMessage(Ae.Warning,e,!1)},n.prototype.warningPii=function(e){this.logMessage(Ae.Warning,e,!0)},n.prototype.info=function(e){this.logMessage(Ae.Info,e,!1)},n.prototype.infoPii=function(e){this.logMessage(Ae.Info,e,!0)},n.prototype.verbose=function(e){this.logMessage(Ae.Verbose,e,!1)},n.prototype.verbosePii=function(e){this.logMessage(Ae.Verbose,e,!0)},n.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled},n}(),ir={clientId:"",authority:null,validateAuthority:!0,authorityMetadata:"",knownAuthorities:[],redirectUri:function(){return H.getCurrentUrl()},postLogoutRedirectUri:function(){return H.getCurrentUrl()},navigateToLoginRequestUrl:!0},ar={cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},sr={logger:new tr(null),loadFrameTimeout:6e3,tokenRenewalOffsetSeconds:300,navigateFrameWait:500},cr={isAngular:!1,unprotectedResources:new Array,protectedResourceMap:new Map},Ct_serverUnavailable_code="server_unavailable",Ct_serverUnavailable_desc="Server is temporarily unavailable.",Ct_unknownServerError_code="unknown_server_error",Ht=function(n){function e(t,r){var o=n.call(this,t,r)||this;return o.name="ServerError",Object.setPrototypeOf(o,e.prototype),o}return ke(e,n),e.createServerUnavailableError=function(){return new e(Ct_serverUnavailable_code,Ct_serverUnavailable_desc)},e.createUnknownServerError=function(t){return new e(Ct_unknownServerError_code,t)},e}(Ke),nt_interactionRequired={code:"interaction_required"},nt_consentRequired={code:"consent_required"},nt_loginRequired={code:"login_required"},pt=function(n){function e(t,r){var o=n.call(this,t,r)||this;return o.name="InteractionRequiredAuthError",Object.setPrototypeOf(o,e.prototype),o}return ke(e,n),e.isInteractionRequiredError=function(t){return t&&[nt_interactionRequired.code,nt_consentRequired.code,nt_loginRequired.code].indexOf(t)>-1},e.createLoginRequiredAuthError=function(t){return new e(nt_loginRequired.code,t)},e.createInteractionRequiredAuthError=function(t){return new e(nt_interactionRequired.code,t)},e.createConsentRequiredAuthError=function(t){return new e(nt_consentRequired.code,t)},e}(Ht);function gt(n){return{uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:"",scopes:null,expiresOn:null,account:null,accountState:n,fromCache:!1}}var qt="event_name",Kt="elapsed_time",At=function(n){var e=H.GetUrlComponents(n);if(Dt.isAdfs(n))return n;var t=e.PathSegments;if(t&&t.length>=2){var r="tfp"===t[1]?2:1;r<t.length&&(t[r]="<tenant>")}return e.Protocol+"//"+e.HostNameAndPort+"/"+t.join("/")},_t=function(n){return fe.base64Encode(n)},B=function(n){return"msal."+(n||"")},Gt=function(){return!!(typeof window<"u"&&"performance"in window&&window.performance.mark&&window.performance.measure)};const kt=function(){function n(e,t,r){var o;this.eventId=fe.createNewGuid(),this.label=r,this.event=((o={})[B(qt)]=e,o[B(Kt)]=-1,o["Microsoft.MSAL.correlation_id"]=t,o)}return n.prototype.setElapsedTime=function(e){this.event[B(Kt)]=e},n.prototype.stop=function(){this.setElapsedTime(+Date.now()-+this.startTimestamp),function(n,e,t){Gt()&&(window.performance.mark(t),window.performance.measure(n,e,t),window.performance.clearMeasures(n),window.performance.clearMarks(e),window.performance.clearMarks(t))}(this.displayName,this.perfStartMark,this.perfEndMark)},n.prototype.start=function(){this.startTimestamp=Date.now(),this.event[B("start_time")]=this.startTimestamp,function(n){Gt()&&window.performance.mark(n)}(this.perfStartMark)},Object.defineProperty(n.prototype,"telemetryCorrelationId",{get:function(){return this.event["Microsoft.MSAL.correlation_id"]},set:function(e){this.event["Microsoft.MSAL.correlation_id"]=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventName",{get:function(){return this.event[B(qt)]},enumerable:!1,configurable:!0}),n.prototype.get=function(){return Y(Y({},this.event),{eventId:this.eventId})},Object.defineProperty(n.prototype,"key",{get:function(){return this.telemetryCorrelationId+"_"+this.eventId+"-"+this.eventName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"displayName",{get:function(){return"Msal-"+this.label+"-"+this.telemetryCorrelationId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"perfStartMark",{get:function(){return"start-"+this.key},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"perfEndMark",{get:function(){return"end-"+this.key},enumerable:!1,configurable:!0}),n}(),vr=function(n){function e(t,r,o,i){var a=n.call(this,B("default_event"),r,"DefaultEvent")||this;return a.event[B("client_id")]=o,a.event[B("sdk_plaform")]=t.sdk,a.event[B("sdk_version")]=t.sdkVersion,a.event[B("application_name")]=t.applicationName,a.event[B("application_version")]=t.applicationVersion,a.event[B("effective_connection_speed")]=t.networkInformation&&t.networkInformation.connectionSpeed,a.event.Microsoft_MSAL_ui_event_count=a.getEventCount(B("ui_event"),i),a.event.Microsoft_MSAL_http_event_count=a.getEventCount(B("http_event"),i),a.event.Microsoft_MSAL_cache_event_count=a.getEventCount(B("cache_event"),i),a}return ke(e,n),e.prototype.getEventCount=function(t,r){return r[t]?r[t]:0},e}(kt);var Ve,Ge_AUTHORITY=B("authority"),Ge_AUTHORITY_TYPE=B("authority_type"),Ge_PROMPT=B("ui_behavior"),Ge_TENANT_ID=B("tenant_id"),Ge_USER_ID=B("user_id"),Ge_WAS_SUCESSFUL=B("was_successful"),Ge_API_ERROR_CODE=B("api_error_code"),Ge_LOGIN_HINT=B("login_hint"),Be=(()=>{return(n=Be||(Be={}))[n.AcquireTokenRedirect=2001]="AcquireTokenRedirect",n[n.AcquireTokenSilent=2002]="AcquireTokenSilent",n[n.AcquireTokenPopup=2003]="AcquireTokenPopup",n[n.LoginRedirect=2004]="LoginRedirect",n[n.LoginPopup=2005]="LoginPopup",n[n.Logout=2006]="Logout",Be;var n})(),Re=(()=>{return(n=Re||(Re={})).AcquireTokenRedirect="AcquireTokenRedirect",n.AcquireTokenSilent="AcquireTokenSilent",n.AcquireTokenPopup="AcquireTokenPopup",n.LoginRedirect="LoginRedirect",n.LoginPopup="LoginPopup",n.Logout="Logout",Re;var n})(),yr=((Ve={})[Re.AcquireTokenSilent]=Be.AcquireTokenSilent,Ve[Re.AcquireTokenPopup]=Be.AcquireTokenPopup,Ve[Re.AcquireTokenRedirect]=Be.AcquireTokenRedirect,Ve[Re.LoginPopup]=Be.LoginPopup,Ve[Re.LoginRedirect]=Be.LoginRedirect,Ve[Re.Logout]=Be.Logout,Ve);const wr=function(n){function e(t,r,o){var i=n.call(this,B("api_event"),t,o)||this;return o&&(i.apiCode=yr[o],i.apiEventIdentifier=o),i.piiEnabled=r,i}return ke(e,n),Object.defineProperty(e.prototype,"apiEventIdentifier",{set:function(t){this.event["msal.api_telem_id"]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiCode",{set:function(t){this.event["msal.api_id"]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authority",{set:function(t){this.event[Ge_AUTHORITY]=At(t).toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiErrorCode",{set:function(t){this.event[Ge_API_ERROR_CODE]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenantId",{set:function(t){this.event[Ge_TENANT_ID]=this.piiEnabled&&t?_t(t):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accountId",{set:function(t){this.event[Ge_USER_ID]=this.piiEnabled&&t?_t(t):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wasSuccessful",{get:function(){return!0===this.event[Ge_WAS_SUCESSFUL]},set:function(t){this.event[Ge_WAS_SUCESSFUL]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loginHint",{set:function(t){this.event[Ge_LOGIN_HINT]=this.piiEnabled&&t?_t(t):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorityType",{set:function(t){this.event[Ge_AUTHORITY_TYPE]=t.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promptType",{set:function(t){this.event[Ge_PROMPT]=t.toLowerCase()},enumerable:!1,configurable:!0}),e}(kt);var Me_HTTP_PATH=B("http_path"),Me_USER_AGENT=B("user_agent"),Me_QUERY_PARAMETERS=B("query_parameters"),Me_API_VERSION=B("api_version"),Me_RESPONSE_CODE=B("response_code"),Me_O_AUTH_ERROR_CODE=B("oauth_error_code"),Me_HTTP_METHOD=B("http_method"),Me_REQUEST_ID_HEADER=B("request_id_header"),Me_SPE_INFO=B("spe_info"),Me_SERVER_ERROR_CODE=B("server_error_code"),Me_SERVER_SUB_ERROR_CODE=B("server_sub_error_code"),Me_URL=B("url");const Sr=function(n){function e(t,r){return n.call(this,B("http_event"),t,r)||this}return ke(e,n),Object.defineProperty(e.prototype,"url",{set:function(t){var r=At(t);this.event[Me_URL]=r&&r.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"httpPath",{set:function(t){this.event[Me_HTTP_PATH]=At(t).toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userAgent",{set:function(t){this.event[Me_USER_AGENT]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queryParams",{set:function(t){this.event[Me_QUERY_PARAMETERS]=Ze.generateQueryParametersString(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiVersion",{set:function(t){this.event[Me_API_VERSION]=t.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"httpResponseStatus",{set:function(t){this.event[Me_RESPONSE_CODE]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oAuthErrorCode",{set:function(t){this.event[Me_O_AUTH_ERROR_CODE]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"httpMethod",{set:function(t){this.event[Me_HTTP_METHOD]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestIdHeader",{set:function(t){this.event[Me_REQUEST_ID_HEADER]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speInfo",{set:function(t){this.event[Me_SPE_INFO]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverErrorCode",{set:function(t){this.event[Me_SERVER_ERROR_CODE]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverSubErrorCode",{set:function(t){this.event[Me_SERVER_SUB_ERROR_CODE]=t},enumerable:!1,configurable:!0}),e}(kt),Bt=function(){function n(e,t,r){this.completedEvents={},this.inProgressEvents={},this.eventCountByCorrelationId={},this.onlySendFailureTelemetry=!1,this.telemetryPlatform=Y({sdk:m.libraryName,sdkVersion:ht,networkInformation:{connectionSpeed:typeof navigator<"u"&&navigator.connection&&navigator.connection.effectiveType}},e.platform),this.clientId=e.clientId,this.onlySendFailureTelemetry=e.onlySendFailureTelemetry,this.telemetryEmitter=t,this.logger=r}return n.getTelemetrymanagerStub=function(e,t){return new this({platform:{applicationName:"UnSetStub",applicationVersion:"0.0"},clientId:e},function(){},t)},n.prototype.startEvent=function(e){this.logger.verbose("Telemetry Event started: "+e.key),this.telemetryEmitter&&(e.start(),this.inProgressEvents[e.key]=e)},n.prototype.stopEvent=function(e){this.logger.verbose("Telemetry Event stopped: "+e.key),this.telemetryEmitter&&this.inProgressEvents[e.key]&&(e.stop(),this.incrementEventCount(e),this.completedEvents[e.telemetryCorrelationId]=Te(this.completedEvents[e.telemetryCorrelationId]||[],[e]),delete this.inProgressEvents[e.key])},n.prototype.flush=function(e){var t=this;if(this.logger.verbose("Flushing telemetry events: "+e),this.telemetryEmitter&&this.completedEvents[e]){var r=this.getOrphanedEvents(e);r.forEach(function(h){return t.incrementEventCount(h)});var o=Te(this.completedEvents[e],r);delete this.completedEvents[e];var i=this.eventCountByCorrelationId[e];if(delete this.eventCountByCorrelationId[e],o&&o.length){var s=Te(o,[new vr(this.telemetryPlatform,e,this.clientId,i)]);this.telemetryEmitter(s.map(function(h){return h.get()}))}}},n.prototype.createAndStartApiEvent=function(e,t){var r=new wr(e,this.logger.isPiiLoggingEnabled(),t);return this.startEvent(r),r},n.prototype.stopAndFlushApiEvent=function(e,t,r,o){t.wasSuccessful=r,o&&(t.apiErrorCode=o),this.stopEvent(t),this.flush(e)},n.prototype.createAndStartHttpEvent=function(e,t,r,o){var i=new Sr(e,o);return i.url=r,i.httpMethod=t,this.startEvent(i),i},n.prototype.incrementEventCount=function(e){var t,r=e.eventName,o=this.eventCountByCorrelationId[e.telemetryCorrelationId];o?o[r]=o[r]?o[r]+1:1:this.eventCountByCorrelationId[e.telemetryCorrelationId]=((t={})[r]=1,t)},n.prototype.getOrphanedEvents=function(e){var t=this;return Object.keys(this.inProgressEvents).reduce(function(r,o){if(-1!==o.indexOf(e)){var i=t.inProgressEvents[o];return delete t.inProgressEvents[o],Te(r,[i])}return r},[])},n}();var Ot=function(){function n(){}return n.filterTokenCacheItemsByScope=function(e,t){return e.filter(function(r){var o=r.key.scopes.split(" "),i=Oe.removeDefaultScopes(t);return Oe.containsScope(o,0===i.length?t:i)})},n.filterTokenCacheItemsByAuthority=function(e,t){return e.filter(function(r){return H.CanonicalizeUri(r.key.authority)===t})},n.filterTokenCacheItemsByDomain=function(e,t){return e.filter(function(r){return H.GetUrlComponents(r.key.authority).HostNameAndPort===t})},n}(),Cr=function(){function n(e){this.authResponseCallback=null,this.tokenReceivedCallback=null,this.errorReceivedCallback=null,this.config=function ur(n){var e=n.auth,t=n.cache,r=void 0===t?{}:t,o=n.system,i=void 0===o?{}:o,a=n.framework,s=void 0===a?{}:a;return{auth:Y(Y({},ir),e),cache:Y(Y({},ar),r),system:Y(Y({},sr),i),framework:Y(Y({},cr),s)}}(e),this.logger=this.config.system.logger,this.clientId=this.config.auth.clientId,this.inCookie=this.config.cache.storeAuthStateInCookie,this.telemetryManager=this.getTelemetryManagerFromConfig(this.config.system.telemetry,this.clientId),dt.setTrustedAuthoritiesFromConfig(this.config.auth.validateAuthority,this.config.auth.knownAuthorities),qe.saveMetadataFromConfig(this.config.auth.authority,this.config.auth.authorityMetadata),this.authority=this.config.auth.authority||"https://login.microsoftonline.com/common",this.cacheStorage=new he(this.clientId,this.config.cache.cacheLocation,this.inCookie),window.activeRenewals||(window.activeRenewals={}),window.renewStates||(window.renewStates=[]),window.callbackMappedToRenewStates||(window.callbackMappedToRenewStates={}),window.promiseMappedToRenewStates||(window.promiseMappedToRenewStates={}),window.msal=this;var t=window.location.hash,r=H.urlContainsHash(t);Se.checkIfBackButtonIsPressed(this.cacheStorage),r&&this.cacheStorage.isInteractionInProgress(!0)&&this.getResponseState(t).method===m.interactionTypeRedirect&&this.handleRedirectAuthenticationResponse(t)}return Object.defineProperty(n.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=qe.CreateInstance(e,this.config.auth.validateAuthority)},enumerable:!1,configurable:!0}),n.prototype.getAuthorityInstance=function(){return this.authorityInstance},n.prototype.handleRedirectCallback=function(e,t){if(!e)throw Ie.createInvalidCallbackObjectError(e);t?(this.tokenReceivedCallback=e,this.errorReceivedCallback=t,this.logger.warning("This overload for callback is deprecated - please change the format of the callbacks to a single callback as shown: (err: AuthError, response: AuthResponse).")):this.authResponseCallback=e,this.redirectError?this.authErrorHandler(m.interactionTypeRedirect,this.redirectError,this.redirectResponse):this.redirectResponse&&this.authResponseHandler(m.interactionTypeRedirect,this.redirectResponse)},n.prototype.urlContainsHash=function(e){return this.logger.verbose("UrlContainsHash has been called"),H.urlContainsHash(e)},n.prototype.authResponseHandler=function(e,t,r){if(this.logger.verbose("AuthResponseHandler has been called"),this.cacheStorage.setInteractionInProgress(!1),e===m.interactionTypeRedirect)this.logger.verbose("Interaction type is redirect"),this.errorReceivedCallback?(this.logger.verbose("Two callbacks were provided to handleRedirectCallback, calling success callback with response"),this.tokenReceivedCallback(t)):this.authResponseCallback&&(this.logger.verbose("One callback was provided to handleRedirectCallback, calling authResponseCallback with response"),this.authResponseCallback(null,t));else{if(e!==m.interactionTypePopup)throw ie.createInvalidInteractionTypeError();this.logger.verbose("Interaction type is popup, resolving"),r(t)}},n.prototype.authErrorHandler=function(e,t,r,o){if(this.logger.verbose("AuthErrorHandler has been called"),this.cacheStorage.setInteractionInProgress(!1),e===m.interactionTypeRedirect)if(this.logger.verbose("Interaction type is redirect"),this.errorReceivedCallback)this.logger.verbose("Two callbacks were provided to handleRedirectCallback, calling error callback"),this.errorReceivedCallback(t,r.accountState);else{if(!this.authResponseCallback)throw this.logger.verbose("handleRedirectCallback has not been called and no callbacks are registered, throwing error"),t;this.logger.verbose("One callback was provided to handleRedirectCallback, calling authResponseCallback with error"),this.authResponseCallback(t,r)}else{if(e!==m.interactionTypePopup)throw ie.createInvalidInteractionTypeError();this.logger.verbose("Interaction type is popup, rejecting"),o(t)}},n.prototype.loginRedirect=function(e){this.logger.verbose("LoginRedirect has been called");var t=je.validateRequest(e,!0,this.clientId,m.interactionTypeRedirect);this.acquireTokenInteractive(m.interactionTypeRedirect,!0,t,null,null)},n.prototype.acquireTokenRedirect=function(e){this.logger.verbose("AcquireTokenRedirect has been called");var t=je.validateRequest(e,!1,this.clientId,m.interactionTypeRedirect);this.acquireTokenInteractive(m.interactionTypeRedirect,!1,t,null,null)},n.prototype.loginPopup=function(e){var t=this;this.logger.verbose("LoginPopup has been called");var r=je.validateRequest(e,!0,this.clientId,m.interactionTypePopup),o=this.telemetryManager.createAndStartApiEvent(r.correlationId,Re.LoginPopup);return new Promise(function(i,a){t.acquireTokenInteractive(m.interactionTypePopup,!0,r,i,a)}).then(function(i){return t.logger.verbose("Successfully logged in"),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,o,!0),i}).catch(function(i){throw t.cacheStorage.resetTempCacheItems(r.state),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,o,!1,i.errorCode),i})},n.prototype.acquireTokenPopup=function(e){var t=this;this.logger.verbose("AcquireTokenPopup has been called");var r=je.validateRequest(e,!1,this.clientId,m.interactionTypePopup),o=this.telemetryManager.createAndStartApiEvent(r.correlationId,Re.AcquireTokenPopup);return new Promise(function(i,a){t.acquireTokenInteractive(m.interactionTypePopup,!1,r,i,a)}).then(function(i){return t.logger.verbose("Successfully acquired token"),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,o,!0),i}).catch(function(i){throw t.cacheStorage.resetTempCacheItems(r.state),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,o,!1,i.errorCode),i})},n.prototype.acquireTokenInteractive=function(e,t,r,o,i){var u,a=this;this.logger.verbose("AcquireTokenInteractive has been called"),Se.blockReloadInHiddenIframes();try{this.cacheStorage.setInteractionInProgress(!0)}catch{var s=t?ie.createLoginInProgressError():ie.createAcquireTokenInProgressError(),h=gt(this.getAccountState(r.state));return this.cacheStorage.resetTempCacheItems(r.state),void this.authErrorHandler(e,s,h,i)}if(e===m.interactionTypeRedirect&&this.cacheStorage.setItem(ee.REDIRECT_REQUEST,""+m.inProgress+m.resourceDelimiter+r.state),r&&r.account&&!t?(u=r.account,this.logger.verbose("Account set from request")):(u=this.getAccount(),this.logger.verbose("Account set from MSAL Cache")),u||Ze.isSSOParam(r))this.logger.verbose("User session exists, login not required"),this.acquireTokenHelper(u,e,t,r,o,i);else{if(!t)return this.logger.verbose("AcquireToken call, no context or account given"),this.logger.info("User login is required"),h=gt(this.getAccountState(r.state)),this.cacheStorage.resetTempCacheItems(r.state),void this.authErrorHandler(e,ie.createUserLoginRequiredError(),h,i);if(this.extractADALIdToken()&&!r.scopes){this.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken");var D=this.buildIDTokenRequest(r);this.silentLogin=!0,this.acquireTokenSilent(D).then(function(C){a.silentLogin=!1,a.logger.info("Unified cache call is successful"),a.authResponseHandler(e,C,o)},function(C){a.silentLogin=!1,a.logger.error("Error occurred during unified cache ATS: "+C),a.acquireTokenHelper(null,e,t,r,o,i)})}else this.logger.verbose("Login call but no token found, proceed to login"),this.acquireTokenHelper(null,e,t,r,o,i)}},n.prototype.acquireTokenHelper=function(e,t,r,o,i,a){return He(this,void 0,void 0,function(){var s,h,u,S,D,C,q,re,pe,Ue;return Pe(this,function(ve){switch(ve.label){case 0:this.logger.verbose("AcquireTokenHelper has been called"),this.logger.verbose("Interaction type: "+t+". isLoginCall: "+r),s=o.scopes?o.scopes.join(" ").toLowerCase():m.oidcScopes.join(" "),this.logger.verbosePii("Request signature: "+s),u=o&&o.authority?qe.CreateInstance(o.authority,this.config.auth.validateAuthority,o.authorityMetadata):this.authorityInstance,ve.label=1;case 1:return ve.trys.push([1,11,,12]),u.hasCachedMetadata()?[3,3]:(this.logger.verbose("No cached metadata for authority"),[4,qe.saveMetadataFromNetwork(u,this.telemetryManager,o.correlationId)]);case 2:return ve.sent(),[3,4];case 3:this.logger.verbose("Cached metadata found for authority"),ve.label=4;case 4:if(D=r?"id_token":this.getTokenType(e,o.scopes),C=o.redirectStartPage||window.location.href,h=new Ze(u,this.clientId,D,this.getRedirectUri(o&&o.redirectUri),o.scopes,o.state,o.correlationId),this.logger.verbose("Finished building server authentication request"),this.updateCacheEntries(h,e,r,C),this.logger.verbose("Updating cache entries"),h.populateQueryParams(e,o),this.logger.verbose("Query parameters populated from account"),q=H.createNavigateUrl(h)+m.response_mode_fragment,t===m.interactionTypeRedirect)r?this.logger.verbose("Interaction type redirect but login call is true. State not cached"):(this.cacheStorage.setItem(he.generateTemporaryCacheKey(ee.STATE_ACQ_TOKEN,o.state),h.state,this.inCookie),this.logger.verbose("State cached for redirect"),this.logger.verbosePii("State cached: "+h.state));else{if(t!==m.interactionTypePopup)throw this.logger.verbose("Invalid interaction error. State not cached"),ie.createInvalidInteractionTypeError();window.renewStates.push(h.state),window.requestType=r?m.login:m.renewToken,this.logger.verbose("State saved to window"),this.logger.verbosePii("State saved: "+h.state),this.registerCallback(h.state,s,i,a)}if(t!==m.interactionTypePopup)return[3,9];this.logger.verbose("Interaction type is popup. Generating popup window");try{S=this.openPopup(q,"msal",m.popUpWidth,m.popUpHeight),Se.trackPopup(S)}catch{if(this.logger.info(M_popUpWindowError_code+":"+M_popUpWindowError_desc),this.cacheStorage.setItem(Ee.ERROR,M_popUpWindowError_code),this.cacheStorage.setItem(Ee.ERROR_DESC,M_popUpWindowError_desc),a)return a(ie.createPopupWindowError()),[2]}if(!S)return[3,8];ve.label=5;case 5:return ve.trys.push([5,7,,8]),[4,Se.monitorPopupForHash(S,this.config.system.loadFrameTimeout,q,this.logger)];case 6:return re=ve.sent(),this.handleAuthenticationResponse(re),this.cacheStorage.setInteractionInProgress(!1),this.logger.info("Closing popup window"),this.config.framework.isAngular&&this.broadcast("msal:popUpHashChanged",re),Se.closePopups(),[3,8];case 7:return pe=ve.sent(),a&&a(pe),this.config.framework.isAngular?this.broadcast("msal:popUpClosed",pe.errorCode+m.resourceDelimiter+pe.errorMessage):(this.cacheStorage.setInteractionInProgress(!1),S.close()),[3,8];case 8:return[3,10];case 9:o.onRedirectNavigate?(this.logger.verbose("Invoking onRedirectNavigate callback"),!1!==o.onRedirectNavigate(q)?(this.logger.verbose("onRedirectNavigate did not return false, navigating"),this.navigateWindow(q)):this.logger.verbose("onRedirectNavigate returned false, stopping navigation")):(this.logger.verbose("Navigating window to urlNavigate"),this.navigateWindow(q)),ve.label=10;case 10:return[3,12];case 11:return Ue=ve.sent(),this.logger.error(Ue),this.cacheStorage.resetTempCacheItems(o.state),this.authErrorHandler(t,ie.createEndpointResolutionError(Ue.toString),gt(o.state),a),S&&S.close(),[3,12];case 12:return[2]}})})},n.prototype.ssoSilent=function(e){if(this.logger.verbose("ssoSilent has been called"),!e)throw Ie.createEmptyRequestError();if(!e.sid&&!e.loginHint)throw Ie.createSsoSilentError();return this.acquireTokenSilent(Y(Y({},e),{scopes:m.oidcScopes}))},n.prototype.acquireTokenSilent=function(e){var t=this;this.logger.verbose("AcquireTokenSilent has been called");var r=je.validateRequest(e,!1,this.clientId,m.interactionTypeSilent),o=this.telemetryManager.createAndStartApiEvent(r.correlationId,Re.AcquireTokenSilent),i=je.createRequestSignature(r);return new Promise(function(a,s){return He(t,void 0,void 0,function(){var h,u,S,D,C,q,re,pe,De,ve;return Pe(this,function(Le){switch(Le.label){case 0:if(Se.blockReloadInHiddenIframes(),h=r.scopes.join(" ").toLowerCase(),this.logger.verbosePii("Serialized scopes: "+h),r.account?(u=r.account,this.logger.verbose("Account set from request")):(u=this.getAccount(),this.logger.verbose("Account set from MSAL Cache")),S=this.cacheStorage.getItem(m.adalIdToken),!u&&!r.sid&&!r.loginHint&&se.isEmpty(S))return this.logger.info("User login is required"),[2,s(ie.createUserLoginRequiredError())];if(D=this.getTokenType(u,r.scopes),this.logger.verbose("Response type: "+D),C=new Ze(qe.CreateInstance(r.authority,this.config.auth.validateAuthority,r.authorityMetadata),this.clientId,D,this.getRedirectUri(r.redirectUri),r.scopes,r.state,r.correlationId),this.logger.verbose("Finished building server authentication request"),Ze.isSSOParam(r)||u?(C.populateQueryParams(u,r,null,!0),this.logger.verbose("Query parameters populated from existing SSO or account")):u||se.isEmpty(S)?this.logger.verbose("No additional query parameters added"):(q=ft.extractIdToken(S),this.logger.verbose("ADAL's idToken exists. Extracting login information from ADAL's idToken to populate query parameters"),C.populateQueryParams(u,null,q,!0)),!(re=r.claimsRequest||C.claimsValue)&&!r.forceRefresh)try{De=this.getCachedToken(C,u)}catch(vt){pe=vt}return De?(this.logger.verbose("Token found in cache lookup"),this.logger.verbosePii("Scopes found: "+JSON.stringify(De.scopes)),a(De),[2,null]):[3,1];case 1:return pe?(this.logger.infoPii(pe.errorCode+":"+pe.errorMessage),s(pe),[2,null]):[3,2];case 2:this.logger.verbose(re?"Skipped cache lookup since claims were given":r.forceRefresh?"Skipped cache lookup since request.forceRefresh option was set to true":"No valid token found in cache lookup"),C.authorityInstance||(C.authorityInstance=r.authority?qe.CreateInstance(r.authority,this.config.auth.validateAuthority,r.authorityMetadata):this.authorityInstance),this.logger.verbosePii("Authority instance: "+C.authority),Le.label=3;case 3:return Le.trys.push([3,7,,8]),C.authorityInstance.hasCachedMetadata()?[3,5]:(this.logger.verbose("No cached metadata for authority"),[4,qe.saveMetadataFromNetwork(C.authorityInstance,this.telemetryManager,r.correlationId)]);case 4:return Le.sent(),this.logger.verbose("Authority has been updated with endpoint discovery response"),[3,6];case 5:this.logger.verbose("Cached metadata found for authority"),Le.label=6;case 6:return window.activeRenewals[i]?(this.logger.verbose("Renewing token in progress. Registering callback"),this.registerCallback(window.activeRenewals[i],i,a,s)):r.scopes&&Oe.onlyContainsOidcScopes(r.scopes)?(this.logger.verbose("OpenID Connect scopes only, renewing idToken"),this.silentLogin=!0,this.renewIdToken(i,a,s,u,C)):(this.logger.verbose("Renewing access token"),this.renewToken(i,a,s,u,C)),[3,8];case 7:return ve=Le.sent(),this.logger.error(ve),s(ie.createEndpointResolutionError(ve.toString())),[2,null];case 8:return[2]}})})}).then(function(a){return t.logger.verbose("Successfully acquired token"),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,o,!0),a}).catch(function(a){throw t.cacheStorage.resetTempCacheItems(r.state),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,o,!1,a.errorCode),a})},n.prototype.openPopup=function(e,t,r,o){this.logger.verbose("OpenPopup has been called");try{var i=window.screenLeft?window.screenLeft:window.screenX,a=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,D=window.open(e,t,"width="+r+", height="+o+", top="+(h/2-o/2+a)+", left="+(s/2-r/2+i)+", scrollbars=yes");if(!D)throw ie.createPopupWindowError();return D.focus&&D.focus(),D}catch(C){throw this.cacheStorage.setInteractionInProgress(!1),ie.createPopupWindowError(C.toString())}},n.prototype.loadIframeTimeout=function(e,t,r){return He(this,void 0,void 0,function(){var o,i,a,s,h;return Pe(this,function(u){switch(u.label){case 0:return o=window.activeRenewals[r],this.logger.verbosePii("Set loading state to pending for: "+r+":"+o),this.cacheStorage.setItem(he.generateTemporaryCacheKey(ee.RENEW_STATUS,o),m.inProgress),this.config.system.navigateFrameWait?[4,Se.loadFrame(e,t,this.config.system.navigateFrameWait,this.logger)]:[3,2];case 1:return a=u.sent(),[3,3];case 2:a=Se.loadFrameSync(e,t,this.logger),u.label=3;case 3:i=a,u.label=4;case 4:return u.trys.push([4,6,,7]),[4,Se.monitorIframeForHash(i.contentWindow,this.config.system.loadFrameTimeout,e,this.logger)];case 5:return(s=u.sent())&&this.handleAuthenticationResponse(s),[3,7];case 6:throw h=u.sent(),this.cacheStorage.getItem(he.generateTemporaryCacheKey(ee.RENEW_STATUS,o))===m.inProgress&&(this.logger.verbose("Loading frame has timed out after: "+this.config.system.loadFrameTimeout/1e3+" seconds for scope/authority "+r+":"+o),o&&window.callbackMappedToRenewStates[o]&&window.callbackMappedToRenewStates[o](null,h),this.cacheStorage.removeItem(he.generateTemporaryCacheKey(ee.RENEW_STATUS,o))),Se.removeHiddenIframe(i),h;case 7:return Se.removeHiddenIframe(i),[2]}})})},n.prototype.navigateWindow=function(e,t){if(!e||se.isEmpty(e))throw this.logger.info("Navigate url is empty"),Ke.createUnexpectedError("Navigate url is empty");var r=t||window;this.logger.infoPii(t?"Navigated Popup window to:"+e:"Navigate to:"+e),r.location.assign(e)},n.prototype.registerCallback=function(e,t,r,o){var i=this;window.activeRenewals[t]=e,window.promiseMappedToRenewStates[e]||(window.promiseMappedToRenewStates[e]=[]),window.promiseMappedToRenewStates[e].push({resolve:r,reject:o}),window.callbackMappedToRenewStates[e]||(window.callbackMappedToRenewStates[e]=function(a,s){delete window.activeRenewals[t];for(var h=0;h<window.promiseMappedToRenewStates[e].length;++h)try{if(s)window.promiseMappedToRenewStates[e][h].reject(s);else{if(!a)throw i.cacheStorage.resetTempCacheItems(e),Ke.createUnexpectedError("Error and response are both null");window.promiseMappedToRenewStates[e][h].resolve(a)}}catch(u){i.logger.warning(u)}delete window.promiseMappedToRenewStates[e],delete window.callbackMappedToRenewStates[e]})},n.prototype.logout=function(e){this.logger.verbose("Logout has been called"),this.logoutAsync(e)},n.prototype.logoutAsync=function(e){return He(this,void 0,void 0,function(){var t,r,o,i,a,s;return Pe(this,function(h){switch(h.label){case 0:t=e||fe.createNewGuid(),r=this.telemetryManager.createAndStartApiEvent(t,Re.Logout),this.clearCache(),this.account=null,h.label=1;case 1:return h.trys.push([1,5,,6]),this.authorityInstance.hasCachedMetadata()?[3,3]:(this.logger.verbose("No cached metadata for authority"),[4,qe.saveMetadataFromNetwork(this.authorityInstance,this.telemetryManager,e)]);case 2:return h.sent(),[3,4];case 3:this.logger.verbose("Cached metadata found for authority"),h.label=4;case 4:return o="client-request-id="+t,i=void 0,this.getPostLogoutRedirectUri()?(i="&post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri()),this.logger.verbose("redirectUri found and set")):(i="",this.logger.verbose("No redirectUri set for app. postLogoutQueryParam is empty")),a=void 0,this.authorityInstance.EndSessionEndpoint?(a=this.authorityInstance.EndSessionEndpoint+"?"+o+i,this.logger.verbose("EndSessionEndpoint found and urlNavigate set"),this.logger.verbosePii("urlNavigate set to: "+this.authorityInstance.EndSessionEndpoint)):(a=this.authority+"oauth2/v2.0/logout?"+o+i,this.logger.verbose("No endpoint, urlNavigate set to default")),this.telemetryManager.stopAndFlushApiEvent(t,r,!0),this.logger.verbose("Navigating window to urlNavigate"),this.navigateWindow(a),[3,6];case 5:return s=h.sent(),this.telemetryManager.stopAndFlushApiEvent(t,r,!1,s.errorCode),[3,6];case 6:return[2]}})})},n.prototype.clearCache=function(){this.logger.verbose("Clearing cache"),window.renewStates=[];for(var e=this.cacheStorage.getAllTokens(m.clientId,m.homeAccountIdentifier),t=0;t<e.length;t++)this.cacheStorage.removeItem(JSON.stringify(e[t].key));this.cacheStorage.resetCacheItems(),this.cacheStorage.clearMsalCookie(),this.logger.verbose("Cache cleared")},n.prototype.clearCacheForScope=function(e){this.logger.verbose("Clearing access token from cache");for(var t=this.cacheStorage.getAllAccessTokens(m.clientId,m.homeAccountIdentifier),r=0;r<t.length;r++){var o=t[r];o.value.accessToken===e&&(this.cacheStorage.removeItem(JSON.stringify(o.key)),this.logger.verbosePii("Access token removed: "+o.key))}},n.prototype.isCallback=function(e){return this.logger.info("isCallback will be deprecated in favor of urlContainsHash in MSAL.js v2.0."),this.logger.verbose("isCallback has been called"),H.urlContainsHash(e)},n.prototype.processCallBack=function(e,t,r){this.logger.info("ProcessCallBack has been called. Processing callback from redirect response");var i,a,o=t;o||(this.logger.verbose("StateInfo is null, getting stateInfo from hash"),o=this.getResponseState(e));try{i=this.saveTokenFromHash(e,o)}catch(h){a=h}try{this.cacheStorage.clearMsalCookie(o.state);var s=this.getAccountState(o.state);if(i){if(o.requestType===m.renewToken||i.accessToken?(window.parent!==window?this.logger.verbose("Window is in iframe, acquiring token silently"):this.logger.verbose("Acquiring token interactive in progress"),this.logger.verbose("Response tokenType set to "+k.ACCESS_TOKEN),i.tokenType=k.ACCESS_TOKEN):o.requestType===m.login&&(this.logger.verbose("Response tokenType set to "+k.ID_TOKEN),i.tokenType=k.ID_TOKEN),!r)return this.logger.verbose("Setting redirectResponse"),void(this.redirectResponse=i)}else if(!r)return this.logger.verbose("Response is null, setting redirectResponse with state"),this.redirectResponse=gt(s),this.redirectError=a,void this.cacheStorage.resetTempCacheItems(o.state);this.logger.verbose("Calling callback provided to processCallback"),r(i,a)}catch(h){throw this.logger.error("Error occurred in token received callback function: "+h),ie.createErrorInCallbackFunction(h.toString())}},n.prototype.handleAuthenticationResponse=function(e){this.logger.verbose("HandleAuthenticationResponse has been called");var t=e||window.location.hash,r=this.getResponseState(t);this.logger.verbose("Obtained state from response");var o=window.callbackMappedToRenewStates[r.state];this.processCallBack(t,r,o)},n.prototype.handleRedirectAuthenticationResponse=function(e){this.logger.info("Returned from redirect url"),this.logger.verbose("HandleRedirectAuthenticationResponse has been called"),Se.clearUrlFragment(window),this.logger.verbose("Window.location.hash cleared");var t=this.getResponseState(e);if(this.config.auth.navigateToLoginRequestUrl&&window.parent===window){this.logger.verbose("Window.parent is equal to window, not in popup or iframe. Navigation to login request url after login turned on");var r=this.cacheStorage.getItem(he.generateTemporaryCacheKey(ee.LOGIN_REQUEST,t.state),this.inCookie);if(!r||"null"===r)return this.logger.error("Unable to get valid login request url from cache, redirecting to home page"),void window.location.assign("/");this.logger.verbose("Valid login request url obtained from cache");var o=H.removeHashFromUrl(window.location.href),i=H.removeHashFromUrl(r);if(o!==i)return this.logger.verbose("Current url is not login request url, navigating"),this.logger.verbosePii("CurrentUrl: "+o+", finalRedirectUrl: "+i),void window.location.assign(""+i+e);this.logger.verbose("Current url matches login request url");var a=H.GetUrlComponents(r);a.Hash&&(this.logger.verbose("Login request url contains hash, resetting non-msal hash"),window.location.hash=a.Hash)}else this.config.auth.navigateToLoginRequestUrl||this.logger.verbose("Default navigation to start page after login turned off");this.processCallBack(e,t,null)},n.prototype.getResponseState=function(e){this.logger.verbose("GetResponseState has been called");var r,t=H.deserializeHash(e);if(!t)throw Ke.createUnexpectedError("Hash was not parsed correctly.");if(!t.hasOwnProperty(k.STATE))throw Ke.createUnexpectedError("Hash does not contain state.");this.logger.verbose("Hash contains state. Creating stateInfo object");var o=je.parseLibraryState(t.state);if((r={requestType:m.unknown,state:t.state,timestamp:o.ts,method:o.method,stateMatch:!1}).state===this.cacheStorage.getItem(he.generateTemporaryCacheKey(ee.STATE_LOGIN,r.state),this.inCookie)||r.state===this.silentAuthenticationState)return this.logger.verbose("State matches cached state, setting requestType to login"),r.requestType=m.login,r.stateMatch=!0,r;if(r.state===this.cacheStorage.getItem(he.generateTemporaryCacheKey(ee.STATE_ACQ_TOKEN,r.state),this.inCookie))return this.logger.verbose("State matches cached state, setting requestType to renewToken"),r.requestType=m.renewToken,r.stateMatch=!0,r;if(!r.stateMatch){this.logger.verbose("State does not match cached state, setting requestType to type from window"),r.requestType=window.requestType;for(var i=window.renewStates,a=0;a<i.length;a++)if(i[a]===r.state){this.logger.verbose("Matching state found for request"),r.stateMatch=!0;break}r.stateMatch||this.logger.verbose("Matching state not found for request")}return r},n.prototype.getCachedToken=function(e,t){this.logger.verbose("GetCachedToken has been called");var r=e.scopes,o=this.getCachedIdToken(e,t),i=this.getCachedAccessToken(e,t,r),a=this.getAccountState(e.state);return It.buildAuthResponse(o,i,e,t,r,a)},n.prototype.getTokenCacheItemByAuthority=function(e,t,r,o){var a,i=this;return 1===(a=H.isCommonAuthority(e)||H.isOrganizationsAuthority(e)||H.isConsumersAuthority(e)?Ot.filterTokenCacheItemsByDomain(t,H.GetUrlComponents(e).HostNameAndPort):Ot.filterTokenCacheItemsByAuthority(t,e)).length?a[0]:a.length>1?(this.logger.warning("Multiple matching tokens found. Cleaning cache and requesting a new token."),a.forEach(function(s){i.cacheStorage.removeItem(JSON.stringify(s.key))}),null):(this.logger.verbose("No matching tokens of type "+o+" found"),null)},n.prototype.getCachedIdToken=function(e,t){this.logger.verbose("Getting all cached tokens of type ID Token");var r=this.cacheStorage.getAllIdTokens(this.clientId,t?t.homeAccountIdentifier:null),i=this.getTokenCacheItemByAuthority(e.authority||this.authority,r,null,k.ID_TOKEN);if(i){if(this.logger.verbose("Evaluating ID token found"),this.evaluateTokenExpiration(i)){this.logger.verbose("ID token expiration is within offset, using ID token found in cache");var s=i.value;return this.logger.verbose(s?"ID Token found in cache is valid and unexpired":"ID Token found in cache is invalid"),s?new $e(s.idToken):null}return this.logger.verbose("Cached ID token is expired, removing from cache"),this.cacheStorage.removeItem(JSON.stringify(i.key)),null}return this.logger.verbose("No tokens found"),null},n.prototype.getCachedAccessToken=function(e,t,r){this.logger.verbose("Getting all cached tokens of type Access Token");var o=this.cacheStorage.getAllAccessTokens(this.clientId,t?t.homeAccountIdentifier:null),i=Ot.filterTokenCacheItemsByScope(o,r),s=this.getTokenCacheItemByAuthority(e.authority||this.authority,i,r,k.ACCESS_TOKEN);if(s){if(e.authorityInstance=qe.CreateInstance(s.key.authority,this.config.auth.validateAuthority),this.logger.verbose("Evaluating access token found"),this.evaluateTokenExpiration(s)){this.logger.verbose("Access token expiration is within offset, using access token found in cache");var u=t||this.getAccount();if(!u)throw Ke.createUnexpectedError("Account should not be null here.");var S=this.getAccountState(e.state);return{uniqueId:"",tenantId:"",tokenType:k.ACCESS_TOKEN,idToken:null,idTokenClaims:null,accessToken:s.value.accessToken,scopes:s.key.scopes.split(" "),expiresOn:new Date(1e3*Number(s.value.expiresIn)),account:u,accountState:S,fromCache:!0}}return this.logger.verbose("Access token expired, removing from cache"),this.cacheStorage.removeItem(JSON.stringify(s.key)),null}return this.logger.verbose("No matching token found when filtering by scope and authority"),null},n.prototype.evaluateTokenExpiration=function(e){var t=Number(e.value.expiresIn);return ft.validateExpirationIsWithinOffset(t,this.config.system.tokenRenewalOffsetSeconds)},n.prototype.extractADALIdToken=function(){this.logger.verbose("ExtractADALIdToken has been called");var e=this.cacheStorage.getItem(m.adalIdToken);return se.isEmpty(e)?null:ft.extractIdToken(e)},n.prototype.renewToken=function(e,t,r,o,i){this.logger.verbose("RenewToken has been called"),this.logger.verbosePii("RenewToken scope and authority: "+e);var a=Se.generateFrameName("msalRenewFrame",e);Se.addHiddenIFrame(a,this.logger),this.updateCacheEntries(i,o,!1),this.logger.verbosePii("RenewToken expected state: "+i.state);var s=H.urlRemoveQueryStringParameter(H.createNavigateUrl(i),m.prompt)+m.prompt_none+m.response_mode_fragment;window.renewStates.push(i.state),window.requestType=m.renewToken,this.logger.verbose("Set window.renewState and requestType"),this.registerCallback(i.state,e,t,r),this.logger.infoPii("Navigate to: "+s),this.loadIframeTimeout(s,a,e).catch(function(h){return r(h)})},n.prototype.renewIdToken=function(e,t,r,o,i){this.logger.info("RenewIdToken has been called");var a=Se.generateFrameName("msalIdTokenFrame",e);Se.addHiddenIFrame(a,this.logger),this.updateCacheEntries(i,o,!1),this.logger.verbose("RenewIdToken expected state: "+i.state);var s=H.urlRemoveQueryStringParameter(H.createNavigateUrl(i),m.prompt)+m.prompt_none+m.response_mode_fragment;this.silentLogin?(this.logger.verbose("Silent login is true, set silentAuthenticationState"),window.requestType=m.login,this.silentAuthenticationState=i.state):(this.logger.verbose("Not silent login, set window.renewState and requestType"),window.requestType=m.renewToken,window.renewStates.push(i.state)),this.registerCallback(i.state,e,t,r),this.logger.infoPii('Navigate to:" '+s),this.loadIframeTimeout(s,a,e).catch(function(h){return r(h)})},n.prototype.saveToken=function(e,t,r,o,i){var a=new Yt(t,this.clientId,r,o.uid,o.utid),s=new Xt(e.accessToken,e.idToken.rawIdToken,i.toString(),o.encodeClientInfo());return this.cacheStorage.setItem(JSON.stringify(a),JSON.stringify(s)),i?(this.logger.verbose("New expiration set for token"),e.expiresOn=new Date(1e3*i)):this.logger.error("Could not parse expiresIn parameter for access token"),e},n.prototype.saveIdToken=function(e,t,r,o,i){this.logger.verbose("SaveIdToken has been called");var a=Y({},e);a.scopes=m.oidcScopes,a.accessToken=r[k.ID_TOKEN];var h=Number(i.expiration);return this.logger.verbose("Saving ID token to cache"),this.saveToken(a,t,void 0,o,h)},n.prototype.saveAccessToken=function(e,t,r,o){this.logger.verbose("SaveAccessToken has been called");var i=Y({},e),a=r[k.SCOPE],s=a.split(" "),h=this.cacheStorage.getAllAccessTokens(this.clientId,t);this.logger.verbose("Retrieving all access tokens from cache and removing duplicates");for(var u=0;u<h.length;u++){var S=h[u];if(S.key.homeAccountIdentifier===e.account.homeAccountIdentifier){var D=S.key.scopes.split(" ");Oe.isIntersectingScopes(D,s)&&this.cacheStorage.removeItem(JSON.stringify(S.key))}}i.accessToken=r[k.ACCESS_TOKEN],i.scopes=s;var C=tt.parseExpiresIn(r[k.EXPIRES_IN]),re=je.parseLibraryState(r[k.STATE]).ts+C;return this.logger.verbose("Saving access token to cache"),this.saveToken(i,t,a,o,re)},n.prototype.saveTokenFromHash=function(e,t){this.logger.verbose("SaveTokenFromHash has been called"),this.logger.info("State status: "+t.stateMatch+"; Request type: "+t.requestType);var o,r={uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:null,scopes:[],expiresOn:null,account:null,accountState:"",fromCache:!1},i=H.deserializeHash(e),a="",s="",h=null;if(i.hasOwnProperty(k.ERROR_DESCRIPTION)||i.hasOwnProperty(k.ERROR)){if(this.logger.verbose("Server returned an error"),this.logger.infoPii("Error : "+i[k.ERROR]+"; Error description: "+i[k.ERROR_DESCRIPTION]),this.cacheStorage.setItem(Ee.ERROR,i[k.ERROR]),this.cacheStorage.setItem(Ee.ERROR_DESC,i[k.ERROR_DESCRIPTION]),t.requestType===m.login&&(this.logger.verbose("RequestType is login, caching login error, generating authorityKey"),this.cacheStorage.setItem(Ee.LOGIN_ERROR,i[k.ERROR_DESCRIPTION]+":"+i[k.ERROR]),a=he.generateAuthorityKey(t.state)),t.requestType===m.renewToken){this.logger.verbose("RequestType is renewToken, generating acquireTokenAccountKey"),a=he.generateAuthorityKey(t.state);var u=this.getAccount(),S=void 0;u&&!se.isEmpty(u.homeAccountIdentifier)?(S=u.homeAccountIdentifier,this.logger.verbose("AccountId is set")):(S=m.no_account,this.logger.verbose("AccountId is set as no_account")),s=he.generateAcquireTokenAccountKey(S,t.state)}var C=i[k.ERROR_DESCRIPTION];o=pt.isInteractionRequiredError(i[k.ERROR])||pt.isInteractionRequiredError(C)?new pt(i[k.ERROR],i[k.ERROR_DESCRIPTION]):new Ht(i[k.ERROR],i[k.ERROR_DESCRIPTION])}else if(this.logger.verbose("Server returns success"),t.stateMatch){this.logger.info("State is right"),i.hasOwnProperty(k.SESSION_STATE)&&(this.logger.verbose("Fragment has session state, caching"),this.cacheStorage.setItem(he.generateTemporaryCacheKey(ee.SESSION_STATE,t.state),i[k.SESSION_STATE])),r.accountState=this.getAccountState(t.state);var q=void 0;if(i.hasOwnProperty(k.ACCESS_TOKEN)){this.logger.info("Fragment has access token"),r.accessToken=i[k.ACCESS_TOKEN],i.hasOwnProperty(k.SCOPE)&&(r.scopes=i[k.SCOPE].split(" ")),i.hasOwnProperty(k.ID_TOKEN)?(this.logger.verbose("Fragment has id_token"),h=new $e(i[k.ID_TOKEN])):(this.logger.verbose("No idToken on fragment, getting idToken from cache"),h=new $e(this.cacheStorage.getItem(Ne.IDTOKEN))),r=It.setResponseIdToken(r,h);var re=this.populateAuthority(t.state,this.inCookie,this.cacheStorage,h);this.logger.verbose("Got authority from cache"),i.hasOwnProperty(k.CLIENT_INFO)?(this.logger.verbose("Fragment has clientInfo"),q=new et(i[k.CLIENT_INFO],re)):this.authorityInstance.AuthorityType===Qe.Adfs?q=et.createClientInfoFromIdToken(h,re):this.logger.warning("ClientInfo not received in the response from AAD"),r.account=rt.createAccount(h,q),this.logger.verbose("Account object created from response");var pe=void 0;r.account&&!se.isEmpty(r.account.homeAccountIdentifier)?(this.logger.verbose("AccountKey set"),pe=r.account.homeAccountIdentifier):(this.logger.verbose("AccountKey set as no_account"),pe=m.no_account),s=he.generateAcquireTokenAccountKey(pe,t.state);var De=he.generateAcquireTokenAccountKey(m.no_account,t.state);this.logger.verbose("AcquireTokenAccountKey generated");var Ue=this.cacheStorage.getItem(s),ve=void 0;se.isEmpty(Ue)?se.isEmpty(this.cacheStorage.getItem(De))||(this.logger.verbose("No acquireToken account retrieved from cache"),r=this.saveAccessToken(r,re,i,q)):(ve=JSON.parse(Ue),this.logger.verbose("AcquireToken request account retrieved from cache"),r.account&&ve&&rt.compareAccounts(r.account,ve)?(r=this.saveAccessToken(r,re,i,q),this.logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this.logger.warning("The account object created from the response is not the same as the one passed in the acquireToken request"))}if(i.hasOwnProperty(k.ID_TOKEN))if(this.logger.info("Fragment has idToken"),h=new $e(i[k.ID_TOKEN]),re=this.populateAuthority(t.state,this.inCookie,this.cacheStorage,h),r=It.setResponseIdToken(r,h),i.hasOwnProperty(k.CLIENT_INFO)?(this.logger.verbose("Fragment has clientInfo"),q=new et(i[k.CLIENT_INFO],re)):this.authorityInstance.AuthorityType===Qe.Adfs?q=et.createClientInfoFromIdToken(h,re):this.logger.warning("ClientInfo not received in the response from AAD"),this.account=rt.createAccount(h,q),r.account=this.account,this.logger.verbose("Account object created from response"),h&&h.nonce){this.logger.verbose("IdToken has nonce");var Le=this.cacheStorage.getItem(he.generateTemporaryCacheKey(ee.NONCE_IDTOKEN,t.state),this.inCookie);h.nonce!==Le?(this.account=null,this.cacheStorage.setItem(Ee.LOGIN_ERROR,"Nonce Mismatch. Expected Nonce: "+Le+",Actual Nonce: "+h.nonce),this.logger.error("Nonce Mismatch. Expected Nonce: "+Le+", Actual Nonce: "+h.nonce),o=ie.createNonceMismatchError(Le,h.nonce)):(this.logger.verbose("Nonce matches, saving idToken to cache"),this.cacheStorage.setItem(Ne.IDTOKEN,i[k.ID_TOKEN],this.inCookie),this.cacheStorage.setItem(Ne.CLIENT_INFO,q.encodeClientInfo(),this.inCookie),this.saveIdToken(r,re,i,q,h))}else this.logger.verbose("No idToken or no nonce. Cache key for Authority set as state"),a=t.state,s=t.state,this.logger.error("Invalid id_token received in the response"),o=ie.createInvalidIdTokenError(h),this.cacheStorage.setItem(Ee.ERROR,o.errorCode),this.cacheStorage.setItem(Ee.ERROR_DESC,o.errorMessage)}else{this.logger.verbose("State mismatch"),a=t.state,s=t.state;var vt=this.cacheStorage.getItem(he.generateTemporaryCacheKey(ee.STATE_LOGIN,t.state),this.inCookie);this.logger.error("State Mismatch. Expected State: "+vt+", Actual State: "+t.state),o=ie.createInvalidStateError(t.state,vt),this.cacheStorage.setItem(Ee.ERROR,o.errorCode),this.cacheStorage.setItem(Ee.ERROR_DESC,o.errorMessage)}if(this.cacheStorage.removeItem(he.generateTemporaryCacheKey(ee.RENEW_STATUS,t.state)),this.cacheStorage.resetTempCacheItems(t.state),this.logger.verbose("Status set to complete, temporary cache cleared"),this.inCookie&&(this.logger.verbose("InCookie is true, setting authorityKey in cookie"),this.cacheStorage.setItemCookie(a,"",-1),this.cacheStorage.clearMsalCookie(t.state)),o)throw o;if(!r)throw Ke.createUnexpectedError("Response is null");return r},n.prototype.populateAuthority=function(e,t,r,o){this.logger.verbose("PopulateAuthority has been called");var i=he.generateAuthorityKey(e),a=r.getItem(i,t);return se.isEmpty(a)?a:H.replaceTenantPath(a,o.tenantId)},n.prototype.getAccount=function(){if(this.account)return this.account;var e=this.cacheStorage.getItem(Ne.IDTOKEN,this.inCookie),t=this.cacheStorage.getItem(Ne.CLIENT_INFO,this.inCookie);if(!se.isEmpty(e)&&!se.isEmpty(t)){var r=new $e(e),o=new et(t,"");return this.account=rt.createAccount(r,o),this.account}return null},n.prototype.getAccountState=function(e){if(e){var t=e.indexOf(m.resourceDelimiter);if(t>-1&&t+1<e.length)return e.substring(t+1)}return e},n.prototype.getAllAccounts=function(){for(var e=[],t=this.cacheStorage.getAllAccessTokens(m.clientId,m.homeAccountIdentifier),r=0;r<t.length;r++){var o=new $e(t[r].value.idToken),i=new et(t[r].value.homeAccountIdentifier,""),a=rt.createAccount(o,i);e.push(a)}return this.getUniqueAccounts(e)},n.prototype.getUniqueAccounts=function(e){if(!e||e.length<=1)return e;for(var t=[],r=[],o=0;o<e.length;++o)e[o].homeAccountIdentifier&&-1===t.indexOf(e[o].homeAccountIdentifier)&&(t.push(e[o].homeAccountIdentifier),r.push(e[o]));return r},n.prototype.broadcast=function(e,t){var r=new CustomEvent(e,{detail:t});window.dispatchEvent(r)},n.prototype.getCachedTokenInternal=function(e,t,r,o){var i=t||this.getAccount();if(!i)return null;var a=this.authorityInstance?this.authorityInstance:qe.CreateInstance(this.authority,this.config.auth.validateAuthority),s=this.getTokenType(i,e),h=new Ze(a,this.clientId,s,this.getRedirectUri(),e,r,o);return this.getCachedToken(h,t)},n.prototype.getScopesForEndpoint=function(e){if(this.config.framework.unprotectedResources.length>0)for(var t=0;t<this.config.framework.unprotectedResources.length;t++)if(e.indexOf(this.config.framework.unprotectedResources[t])>-1)return null;if(this.config.framework.protectedResourceMap.size>0)for(var r=0,o=Array.from(this.config.framework.protectedResourceMap.keys());r<o.length;r++){var i=o[r];if(e.indexOf(i)>-1)return this.config.framework.protectedResourceMap.get(i)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?H.getHostFromUri(e)===H.getHostFromUri(this.getRedirectUri())?new Array(this.clientId):null:new Array(this.clientId)},n.prototype.getLoginInProgress=function(){return this.cacheStorage.isInteractionInProgress(!0)},n.prototype.setInteractionInProgress=function(e){this.cacheStorage.setInteractionInProgress(e)},n.prototype.setloginInProgress=function(e){this.setInteractionInProgress(e)},n.prototype.getAcquireTokenInProgress=function(){return this.cacheStorage.isInteractionInProgress(!0)},n.prototype.setAcquireTokenInProgress=function(e){this.setInteractionInProgress(e)},n.prototype.getLogger=function(){return this.logger},n.prototype.setLogger=function(e){this.logger=e},n.prototype.getRedirectUri=function(e){return e||("function"==typeof this.config.auth.redirectUri?this.config.auth.redirectUri():this.config.auth.redirectUri)},n.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this.config.auth.postLogoutRedirectUri?this.config.auth.postLogoutRedirectUri():this.config.auth.postLogoutRedirectUri},n.prototype.getCurrentConfiguration=function(){if(!this.config)throw Ie.createNoSetConfigurationError();return this.config},n.prototype.getTokenType=function(e,t){var r=rt.compareAccounts(e,this.getAccount());return Ze.determineResponseType(r,t)},n.prototype.setAccountCache=function(e,t){var r=e?this.getAccountId(e):m.no_account,o=he.generateAcquireTokenAccountKey(r,t);this.cacheStorage.setItem(o,JSON.stringify(e))},n.prototype.setAuthorityCache=function(e,t){var r=he.generateAuthorityKey(e);this.cacheStorage.setItem(r,H.CanonicalizeUri(t),this.inCookie)},n.prototype.updateCacheEntries=function(e,t,r,o){o&&this.cacheStorage.setItem(he.generateTemporaryCacheKey(ee.LOGIN_REQUEST,e.state),o,this.inCookie),r?this.cacheStorage.setItem(he.generateTemporaryCacheKey(ee.STATE_LOGIN,e.state),e.state,this.inCookie):this.setAccountCache(t,e.state),this.setAuthorityCache(e.state,e.authority),this.cacheStorage.setItem(he.generateTemporaryCacheKey(ee.NONCE_IDTOKEN,e.state),e.nonce,this.inCookie)},n.prototype.getAccountId=function(e){return se.isEmpty(e.homeAccountIdentifier)?m.no_account:e.homeAccountIdentifier},n.prototype.buildIDTokenRequest=function(e){return{scopes:m.oidcScopes,authority:this.authority,account:this.getAccount(),extraQueryParameters:e.extraQueryParameters,correlationId:e.correlationId}},n.prototype.getTelemetryManagerFromConfig=function(e,t){if(!e)return Bt.getTelemetrymanagerStub(t,this.logger);var r=e.applicationName,o=e.applicationVersion,i=e.telemetryEmitter;if(!r||!o||!i)throw Ie.createTelemetryConfigError(e);return new Bt({platform:{applicationName:r,applicationVersion:o},clientId:t},i,this.logger)},n}(),Ar=O(26777),Rt=O(36895);let Pt=(()=>{let n=class{constructor(){this._msalSubject=new _e.X(1),this.msalItem$=this._msalSubject.asObservable()}broadcast(t,r){this._msalSubject.next({type:t,payload:r})}getMSALSubject(){return this._msalSubject}getMSALItem(){return this.msalItem$}subscribe(t,r){return this.msalItem$.pipe((0,xe.h)(o=>o.type===t),(0,yt.U)(o=>o.payload)).subscribe(r)}};return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n})();class _r{constructor(e,t,r){this._error="",this._errorDesc="",this._scopes="",this._error=e,t&&(this._errorDesc=t),r&&(this._scopes=r)}get error(){return this._error}set error(e){this._error=e}get errorDesc(){return this._errorDesc}set errorDesc(e){this._errorDesc=e}get scopes(){return this._scopes}set scopes(e){this._scopes=e}}const st=new c.OlP("MSAL_CONFIG"),ct=new c.OlP("MSAL_CONFIG_ANGULAR");let zt=(()=>{let n=class extends Cr{constructor(t,r,o,i){super((n=>Object.assign(Object.assign({},n),{framework:Object.assign(Object.assign({},n.framework),{isAngular:!0})}))(t)),this.msalConfig=t,this.msalAngularConfig=r,this.router=o,this.broadcastService=i,window.addEventListener("msal:popUpHashChanged",()=>{this.getLogger().verbose("popUpHashChanged ")}),window.addEventListener("msal:popUpClosed",a=>{const s=a.detail.split("|"),h=new _r(s[0],s[1]);this.getLoginInProgress()?(i.broadcast("msal:loginFailure",h),this.setloginInProgress(!1)):this.getAcquireTokenInProgress()&&(i.broadcast("msal:acquireTokenFailure",h),this.setAcquireTokenInProgress(!1))})}loginPopup(t){return super.loginPopup(t).then(r=>(this.broadcastService.broadcast("msal:loginSuccess",r),r)).catch(r=>{throw this.broadcastService.broadcast("msal:loginFailure",r),this.getLogger().error("Error during login:\n"+r.errorMessage),r})}ssoSilent(t){return super.ssoSilent(t).then(r=>(this.broadcastService.broadcast("msal:ssoSuccess",r),r)).catch(r=>{throw this.broadcastService.broadcast("msal:ssoFailure",r),this.getLogger().error("Error during login:\n"+r.errorMessage),r})}acquireTokenSilent(t){return super.acquireTokenSilent(t).then(r=>(this.broadcastService.broadcast("msal:acquireTokenSuccess",r),r)).catch(r=>{throw this.broadcastService.broadcast("msal:acquireTokenFailure",r),this.getLogger().error("Error when acquiring token for scopes: "+t.scopes+" "+r),r})}acquireTokenPopup(t){return super.acquireTokenPopup(t).then(r=>(this.broadcastService.broadcast("msal:acquireTokenSuccess",r),r)).catch(r=>{throw this.broadcastService.broadcast("msal:acquireTokenFailure",r),this.getLogger().error("Error when acquiring token for scopes : "+t.scopes+" "+r),r})}handleRedirectCallback(t,r){super.handleRedirectCallback((o,i)=>{o?(this.getAccount()?this.broadcastService.broadcast("msal:acquireTokenFailure",o):this.broadcastService.broadcast("msal:loginFailure",o),r?r(o,i.accountState):t(o,i)):i&&(this.broadcastService.broadcast("id_token"===i.tokenType?"msal:loginSuccess":"msal:acquireTokenSuccess",i),r?t(i):t(null,i))})}clearCacheForScope(t){return super.clearCacheForScope(t)}getScopesForEndpoint(t){(this.msalConfig.framework&&this.msalConfig.framework.unprotectedResources||this.msalAngularConfig&&this.msalAngularConfig.unprotectedResources)&&this.getLogger().info("unprotectedResources is deprecated and ignored. msalAngularConfig.protectedResourceMap now supports glob patterns");const r=this.msalConfig.framework&&this.msalConfig.framework.protectedResourceMap;r&&this.getLogger().info("msalConfig.framework.protectedResourceMap is deprecated, use msalAngularConfig.protectedResourceMap");const o=r&&r.size?r:new Map(this.msalAngularConfig.protectedResourceMap),a=Array.from(o.keys()).filter(s=>new Ar.Minimatch(s).match(t)||t.indexOf(s)>-1);if(a.length>0){a.length>1&&(this.getLogger().warning("Multiple entries in protectedResourceMap found for resource. Using first entry."),this.getLogger().warningPii(`Multiple entries found for: ${t}`));const s=a[0];if(s)return o.get(s)}return t.indexOf("http://")>-1||t.indexOf("https://")>-1?H.getHostFromUri(t)===H.getHostFromUri(super.getRedirectUri())?new Array(this.msalConfig.auth.clientId):null:new Array(this.msalConfig.auth.clientId)}};return n.\u0275fac=function(t){return new(t||n)(c.LFG(st),c.LFG(ct),c.LFG(z.F0),c.LFG(Pt))},n.\u0275prov=c.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n=Q([te(0,(0,c.tBr)(st)),te(1,(0,c.tBr)(ct))],n),n})(),Or=(()=>{let n=class{constructor(t,r,o,i,a,s,h,u){this.msalConfig=t,this.msalAngularConfig=r,this.authService=o,this.router=i,this.activatedRoute=a,this.location=s,this.platformLocation=h,this.broadcastService=u}getDestinationUrl(t){const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?`${o}/${i}`:`${o}${t}`}loginInteractively(t){return function p(n,e,t,r){return new(t||(t=Promise))(function(i,a){function s(S){try{u(r.next(S))}catch(D){a(D)}}function h(S){try{u(r.throw(S))}catch(D){a(D)}}function u(S){S.done?i(S.value):function o(i){return i instanceof t?i:new t(function(a){a(i)})}(S.value).then(s,h)}u((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){if(this.msalAngularConfig.popUp)return this.authService.loginPopup({scopes:this.msalAngularConfig.consentScopes,extraQueryParameters:this.msalAngularConfig.extraQueryParameters}).then(()=>!0).catch(()=>!1);const r=this.getDestinationUrl(t);this.authService.loginRedirect({redirectStartPage:r,scopes:this.msalAngularConfig.consentScopes,extraQueryParameters:this.msalAngularConfig.extraQueryParameters})})}canActivate(t,r){return this.authService.getLogger().verbose("location change event from old url to new url"),H.urlContainsHash(window.location.hash)&&Se.isInIframe()?(this.authService.getLogger().warning("redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),!1):this.authService.getAccount()?this.authService.acquireTokenSilent({scopes:[this.msalConfig.auth.clientId]}).then(()=>!0).catch(o=>{if(pt.isInteractionRequiredError(o.errorCode))return this.authService.getLogger().info("Interaction required error in MSAL Guard, prompting for interaction."),this.loginInteractively(r.url);throw this.authService.getLogger().error(`Non-interaction error in MSAL Guard: ${o.errorMessage}`),o}):this.loginInteractively(r.url)}};return n.\u0275fac=function(t){return new(t||n)(c.LFG(st),c.LFG(ct),c.LFG(zt),c.LFG(z.F0),c.LFG(z.gz),c.LFG(Rt.Ye),c.LFG(Rt.lw),c.LFG(Pt))},n.\u0275prov=c.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n=Q([te(0,(0,c.tBr)(st)),te(1,(0,c.tBr)(ct))],n),n})();const Rr={consentScopes:[],popUp:!1,extraQueryParameters:{},unprotectedResources:[],protectedResourceMap:[]};var Jt;let ot=Jt=class{static forRoot(e,t=Rr){return{ngModule:Jt,providers:[{provide:st,useValue:e},{provide:ct,useValue:t},zt]}}};ot.\u0275fac=function(e){return new(e||ot)},ot.\u0275mod=c.oAB({type:ot}),ot.\u0275inj=c.cJS({providers:[Or,Pt],imports:[Rt.ez]});const Nt=be.N.webBaseUrl,Pr=[];function Nr(n,e,t){console.log("client logging"+e)}const Qt=window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1;class mt{static \u0275fac=function(t){return new(t||mt)};static \u0275mod=c.oAB({type:mt});static \u0275inj=c.cJS({providers:[ce],imports:[L.u5,L.UX,P.m,I,ot.forRoot({auth:{clientId:"",authority:"https://login.microsoftonline.com/common/",validateAuthority:!0,redirectUri:Nt+"/account/login",postLogoutRedirectUri:Nt+"/account/login",navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:Qt},framework:{isAngular:!0}},{popUp:!Qt,consentScopes:["user.read","openid","profile"],unprotectedResources:[],protectedResourceMap:[[Nt,["user.read"]]],extraQueryParameters:{}})]})}},95818:ge=>{"use strict";function U(P,z,c){P instanceof RegExp&&(P=O(P,c)),z instanceof RegExp&&(z=O(z,c));var X=L(P,z,c);return X&&{start:X[0],end:X[1],pre:c.slice(0,X[0]),body:c.slice(X[0]+P.length,X[1]),post:c.slice(X[1]+z.length)}}function O(P,z){var c=z.match(P);return c?c[0]:null}function L(P,z,c){var X,be,K,de,ce,ue=c.indexOf(P),me=c.indexOf(z,ue+1),G=ue;if(ue>=0&&me>0){for(X=[],K=c.length;G>=0&&!ce;)G==ue?(X.push(G),ue=c.indexOf(P,G+1)):1==X.length?ce=[X.pop(),me]:((be=X.pop())<K&&(K=be,de=me),me=c.indexOf(z,G+1)),G=ue<me&&ue>=0?ue:me;X.length&&(ce=[K,de])}return ce}ge.exports=U,U.range=L},80605:(ge,U,O)=>{var L=O(80212),P=O(95818);ge.exports=function G(T){return T?("{}"===T.substr(0,2)&&(T="\\{\\}"+T.substr(2)),N(function ce(T){return T.split("\\\\").join(z).split("\\{").join(c).split("\\}").join(X).split("\\,").join(be).split("\\.").join(K)}(T),!0).map(ue)):[]};var z="\0SLASH"+Math.random()+"\0",c="\0OPEN"+Math.random()+"\0",X="\0CLOSE"+Math.random()+"\0",be="\0COMMA"+Math.random()+"\0",K="\0PERIOD"+Math.random()+"\0";function de(T){return parseInt(T,10)==T?parseInt(T,10):T.charCodeAt(0)}function ue(T){return T.split(z).join("\\").split(c).join("{").split(X).join("}").split(be).join(",").split(K).join(".")}function me(T){if(!T)return[""];var J=[],V=P("{","}",T);if(!V)return T.split(",");var te=V.body,we=V.post,p=V.pre.split(",");p[p.length-1]+="{"+te+"}";var w=me(we);return we.length&&(p[p.length-1]+=w.shift(),p.push.apply(p,w)),J.push.apply(J,p),J}function d(T){return"{"+T+"}"}function f(T){return/^-?0\d/.test(T)}function v(T,J){return T<=J}function I(T,J){return T>=J}function N(T,J){var V=[],Q=P("{","}",T);if(!Q||/\$$/.test(Q.pre))return[T];var E,te=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(Q.body),we=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(Q.body),p=te||we,w=Q.body.indexOf(",")>=0;if(!p&&!w)return Q.post.match(/,.*\}/)?N(T=Q.pre+"{"+Q.body+X+Q.post):[T];if(p)E=Q.body.split(/\.\./);else if(1===(E=me(Q.body)).length&&1===(E=N(E[0],!1).map(d)).length)return(A=Q.post.length?N(Q.post,!1):[""]).map(function(xe){return Q.pre+E[0]+xe});var R,y=Q.pre,A=Q.post.length?N(Q.post,!1):[""];if(p){var Z=de(E[0]),ye=de(E[1]),l=Math.max(E[0].length,E[1].length),g=3==E.length?Math.abs(de(E[2])):1,b=v;ye<Z&&(g*=-1,b=I);var ne=E.some(f);R=[];for(var F=Z;b(F,ye);F+=g){var _;if(we)"\\"===(_=String.fromCharCode(F))&&(_="");else if(_=String(F),ne){var j=l-_.length;if(j>0){var le=new Array(j+1).join("0");_=F<0?"-"+le+_.slice(1):le+_}}R.push(_)}}else R=L(E,function(_e){return N(_e,!1)});for(var $=0;$<R.length;$++)for(var ae=0;ae<A.length;ae++){var Fe=y+R[$]+A[ae];(!J||p||Fe)&&V.push(Fe)}return V}},80212:ge=>{ge.exports=function(O,L){for(var P=[],z=0;z<O.length;z++){var c=L(O[z],z);U(c)?P.push.apply(P,c):P.push(c)}return P};var U=Array.isArray||function(O){return"[object Array]"===Object.prototype.toString.call(O)}},26777:(ge,U,O)=>{ge.exports=d,d.Minimatch=f;var L={sep:"/"};try{L=O(95244)}catch{}var P=d.GLOBSTAR=f.GLOBSTAR={},z=O(80605),c={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},X="[^/]",be=X+"*?",ce=function ue(p){return p.split("").reduce(function(w,E){return w[E]=!0,w},{})}("().*{}+?[]^$\\!"),me=/\/+/;function Ce(p,w){p=p||{},w=w||{};var E={};return Object.keys(w).forEach(function(y){E[y]=w[y]}),Object.keys(p).forEach(function(y){E[y]=p[y]}),E}function d(p,w,E){if("string"!=typeof w)throw new TypeError("glob pattern string required");return E||(E={}),!(!E.nocomment&&"#"===w.charAt(0))&&(""===w.trim()?""===p:new f(w,E).match(p))}function f(p,w){if(!(this instanceof f))return new f(p,w);if("string"!=typeof p)throw new TypeError("glob pattern string required");w||(w={}),p=p.trim(),"/"!==L.sep&&(p=p.split(L.sep).join("/")),this.options=w,this.set=[],this.pattern=p,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function N(p,w){if(w||(w=this instanceof f?this.options:{}),typeof(p=typeof p>"u"?this.pattern:p)>"u")throw new TypeError("undefined pattern");return w.nobrace||!p.match(/\{.*\}/)?[p]:z(p)}d.filter=function G(p,w){return w=w||{},function(E,y,A){return d(E,p,w)}},d.defaults=function(p){if(!p||!Object.keys(p).length)return d;var w=d,E=function(A,R,Z){return w.minimatch(A,R,Ce(p,Z))};return E.Minimatch=function(A,R){return new w.Minimatch(A,Ce(p,R))},E},f.defaults=function(p){return p&&Object.keys(p).length?d.defaults(p).Minimatch:f},f.prototype.debug=function(){},f.prototype.make=function v(){if(!this._made){var p=this.pattern,w=this.options;if(!w.nocomment&&"#"===p.charAt(0))return void(this.comment=!0);if(!p)return void(this.empty=!0);this.parseNegate();var E=this.globSet=this.braceExpand();w.debug&&(this.debug=console.error),this.debug(this.pattern,E),E=this.globParts=E.map(function(y){return y.split(me)}),this.debug(this.pattern,E),E=E.map(function(y,A,R){return y.map(this.parse,this)},this),this.debug(this.pattern,E),E=E.filter(function(y){return-1===y.indexOf(!1)}),this.debug(this.pattern,E),this.set=E}},f.prototype.parseNegate=function I(){var p=this.pattern,w=!1,y=0;if(!this.options.nonegate){for(var A=0,R=p.length;A<R&&"!"===p.charAt(A);A++)w=!w,y++;y&&(this.pattern=p.substr(y)),this.negate=w}},d.braceExpand=function(p,w){return N(p,w)},f.prototype.braceExpand=N,f.prototype.parse=function J(p,w){if(p.length>65536)throw new TypeError("pattern is too long");var E=this.options;if(!E.noglobstar&&"**"===p)return P;if(""===p)return"";var l,y="",A=!!E.nocase,R=!1,Z=[],ye=[],g=!1,b=-1,x=-1,ne="."===p.charAt(0)?"":E.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",F=this;function _(){if(l){switch(l){case"*":y+=be,A=!0;break;case"?":y+=X,A=!0;break;default:y+="\\"+l}F.debug("clearStateChar %j %j",l,y),l=!1}}for(var $,j=0,le=p.length;j<le&&($=p.charAt(j));j++)if(this.debug("%s\t%s %s %j",p,j,y,$),R&&ce[$])y+="\\"+$,R=!1;else switch($){case"/":return!1;case"\\":_(),R=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",p,j,y,$),g){this.debug("  in class"),"!"===$&&j===x+1&&($="^"),y+=$;continue}F.debug("call clearStateChar %j",l),_(),l=$,E.noext&&_();continue;case"(":if(g){y+="(";continue}if(!l){y+="\\(";continue}Z.push({type:l,start:j-1,reStart:y.length,open:c[l].open,close:c[l].close}),this.debug("plType %j %j",l,y+="!"===l?"(?:(?!(?:":"(?:"),l=!1;continue;case")":if(g||!Z.length){y+="\\)";continue}_(),A=!0;var ae=Z.pop();y+=ae.close,"!"===ae.type&&ye.push(ae),ae.reEnd=y.length;continue;case"|":if(g||!Z.length||R){y+="\\|",R=!1;continue}_(),y+="|";continue;case"[":if(_(),g){y+="\\"+$;continue}g=!0,x=j,b=y.length,y+=$;continue;case"]":if(j===x+1||!g){y+="\\"+$,R=!1;continue}if(g){var Fe=p.substring(x+1,j);try{RegExp("["+Fe+"]")}catch{var _e=this.parse(Fe,T);y=y.substr(0,b)+"\\["+_e[0]+"\\]",A=A||_e[1],g=!1;continue}}A=!0,g=!1,y+=$;continue;default:_(),R?R=!1:ce[$]&&!("^"===$&&g)&&(y+="\\"),y+=$}for(g&&(Fe=p.substr(x+1),_e=this.parse(Fe,T),y=y.substr(0,b)+"\\["+_e[0],A=A||_e[1]),ae=Z.pop();ae;ae=Z.pop()){var xe=y.slice(ae.reStart+ae.open.length);this.debug("setting tail",y,ae),xe=xe.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(St,Te,ze){return ze||(ze="\\"),Te+Te+ze+"|"}),this.debug("tail=%j\n   %s",xe,xe,ae,y);var yt="*"===ae.type?be:"?"===ae.type?X:"\\"+ae.type;A=!0,y=y.slice(0,ae.reStart)+yt+"\\("+xe}_(),R&&(y+="\\\\");var Ye=!1;switch(y.charAt(0)){case".":case"[":case"(":Ye=!0}for(var ke=ye.length-1;ke>-1;ke--){var Y=ye[ke],bt=y.slice(0,Y.reStart),Mt=y.slice(Y.reStart,Y.reEnd-8),wt=y.slice(Y.reEnd-8,Y.reEnd),Xe=y.slice(Y.reEnd);wt+=Xe;var He=bt.split("(").length-1,Pe=Xe;for(j=0;j<He;j++)Pe=Pe.replace(/\)[+*?]?/,"");var Et="";""===(Xe=Pe)&&w!==T&&(Et="$"),y=bt+Mt+Xe+Et+wt}if(""!==y&&A&&(y="(?=.)"+y),Ye&&(y=ne+y),w===T)return[y,A];if(!A)return function te(p){return p.replace(/\\(.)/g,"$1")}(p);var ut=E.nocase?"i":"";try{var it=new RegExp("^"+y+"$",ut)}catch{return new RegExp("$.")}return it._glob=p,it._src=y,it};var T={};d.makeRe=function(p,w){return new f(p,w||{}).makeRe()},f.prototype.makeRe=function V(){if(this.regexp||!1===this.regexp)return this.regexp;var p=this.set;if(!p.length)return this.regexp=!1,this.regexp;var w=this.options,E=w.noglobstar?be:w.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",y=w.nocase?"i":"",A=p.map(function(R){return R.map(function(Z){return Z===P?E:"string"==typeof Z?function we(p){return p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(Z):Z._src}).join("\\/")}).join("|");A="^(?:"+A+")$",this.negate&&(A="^(?!"+A+").*$");try{this.regexp=new RegExp(A,y)}catch{this.regexp=!1}return this.regexp},d.match=function(p,w,E){var y=new f(w,E=E||{});return p=p.filter(function(A){return y.match(A)}),y.options.nonull&&!p.length&&p.push(w),p},f.prototype.match=function Q(p,w){if(this.debug("match",p,this.pattern),this.comment)return!1;if(this.empty)return""===p;if("/"===p&&w)return!0;var E=this.options;"/"!==L.sep&&(p=p.split(L.sep).join("/")),p=p.split(me),this.debug(this.pattern,"split",p);var A,R,y=this.set;for(this.debug(this.pattern,"set",y),R=p.length-1;R>=0&&!(A=p[R]);R--);for(R=0;R<y.length;R++){var Z=y[R],ye=p;if(E.matchBase&&1===Z.length&&(ye=[A]),this.matchOne(ye,Z,w))return!!E.flipNegate||!this.negate}return!E.flipNegate&&this.negate},f.prototype.matchOne=function(p,w,E){var y=this.options;this.debug("matchOne",{this:this,file:p,pattern:w}),this.debug("matchOne",p.length,w.length);for(var A=0,R=0,Z=p.length,ye=w.length;A<Z&&R<ye;A++,R++){this.debug("matchOne loop");var F,l=w[R],g=p[A];if(this.debug(w,l,g),!1===l)return!1;if(l===P){this.debug("GLOBSTAR",[w,l,g]);var b=A,x=R+1;if(x===ye){for(this.debug("** at the end");A<Z;A++)if("."===p[A]||".."===p[A]||!y.dot&&"."===p[A].charAt(0))return!1;return!0}for(;b<Z;){var ne=p[b];if(this.debug("\nglobstar while",p,b,w,x,ne),this.matchOne(p.slice(b),w.slice(x),E))return this.debug("globstar found match!",b,Z,ne),!0;if("."===ne||".."===ne||!y.dot&&"."===ne.charAt(0)){this.debug("dot detected!",p,b,w,x);break}this.debug("globstar swallow a segment, and continue"),b++}return!(!E||(this.debug("\n>>> no match, partial?",p,b,w,x),b!==Z))}if("string"==typeof l?(F=y.nocase?g.toLowerCase()===l.toLowerCase():g===l,this.debug("string match",l,g,F)):(F=g.match(l),this.debug("pattern match",l,g,F)),!F)return!1}if(A===Z&&R===ye)return!0;if(A===Z)return E;if(R===ye)return A===Z-1&&""===p[A];throw new Error("wtf?")}},95244:(ge,U,O)=>{"use strict";var L="win32"===process.platform,P=O(26788);function z(d,f){for(var v=[],I=0;I<d.length;I++){var N=d[I];!N||"."===N||(".."===N?v.length&&".."!==v[v.length-1]?v.pop():f&&v.push(".."):v.push(N))}return v}function c(d){for(var f=d.length-1,v=0;v<=f&&!d[v];v++);for(var I=f;I>=0&&!d[I];I--);return 0===v&&I===f?d:v>I?[]:d.slice(v,I+1)}var X=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,be=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,K={};function de(d){var f=X.exec(d),v=(f[1]||"")+(f[2]||""),N=be.exec(f[3]||"");return[v,N[1],N[2],N[3]]}function ce(d){var f=X.exec(d),v=f[1]||"",I=!!v&&":"!==v[1];return{device:v,isUnc:I,isAbsolute:I||!!f[2],tail:f[3]}}function ue(d){return"\\\\"+d.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}K.resolve=function(){for(var d="",f="",v=!1,I=arguments.length-1;I>=-1;I--){var N;if(I>=0?N=arguments[I]:d?(!(N=process.env["="+d])||N.substr(0,3).toLowerCase()!==d.toLowerCase()+"\\")&&(N=d+"\\"):N=process.cwd(),!P.isString(N))throw new TypeError("Arguments to path.resolve must be strings");if(N){var T=ce(N),J=T.device,V=T.isUnc,Q=T.isAbsolute,te=T.tail;if((!J||!d||J.toLowerCase()===d.toLowerCase())&&(d||(d=J),v||(f=te+"\\"+f,v=Q),d&&v))break}}return V&&(d=ue(d)),d+(v?"\\":"")+(f=z(f.split(/[\\\/]+/),!v).join("\\"))||"."},K.normalize=function(d){var f=ce(d),v=f.device,I=f.isUnc,N=f.isAbsolute,T=f.tail,J=/[\\\/]$/.test(T);return!(T=z(T.split(/[\\\/]+/),!N).join("\\"))&&!N&&(T="."),T&&J&&(T+="\\"),I&&(v=ue(v)),v+(N?"\\":"")+T},K.isAbsolute=function(d){return ce(d).isAbsolute},K.join=function(){for(var d=[],f=0;f<arguments.length;f++){var v=arguments[f];if(!P.isString(v))throw new TypeError("Arguments to path.join must be strings");v&&d.push(v)}var I=d.join("\\");return/^[\\\/]{2}[^\\\/]/.test(d[0])||(I=I.replace(/^[\\\/]{2,}/,"\\")),K.normalize(I)},K.relative=function(d,f){d=K.resolve(d),f=K.resolve(f);for(var v=d.toLowerCase(),I=f.toLowerCase(),N=c(f.split("\\")),T=c(v.split("\\")),J=c(I.split("\\")),V=Math.min(T.length,J.length),Q=V,te=0;te<V;te++)if(T[te]!==J[te]){Q=te;break}if(0==Q)return f;var we=[];for(te=Q;te<T.length;te++)we.push("..");return(we=we.concat(N.slice(Q))).join("\\")},K._makeLong=function(d){if(!P.isString(d))return d;if(!d)return"";var f=K.resolve(d);return/^[a-zA-Z]\:\\/.test(f)?"\\\\?\\"+f:/^\\\\[^?.]/.test(f)?"\\\\?\\UNC\\"+f.substring(2):d},K.dirname=function(d){var f=de(d),v=f[0],I=f[1];return v||I?(I&&(I=I.substr(0,I.length-1)),v+I):"."},K.basename=function(d,f){var v=de(d)[2];return f&&v.substr(-1*f.length)===f&&(v=v.substr(0,v.length-f.length)),v},K.extname=function(d){return de(d)[3]},K.format=function(d){if(!P.isObject(d))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof d);if(!P.isString(d.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof d.root);var v=d.dir,I=d.base||"";return v?v[v.length-1]===K.sep?v+I:v+K.sep+I:I},K.parse=function(d){if(!P.isString(d))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof d);var f=de(d);if(!f||4!==f.length)throw new TypeError("Invalid path '"+d+"'");return{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},K.sep="\\",K.delimiter=";";var me=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,G={};function Ce(d){return me.exec(d).slice(1)}G.resolve=function(){for(var d="",f=!1,v=arguments.length-1;v>=-1&&!f;v--){var I=v>=0?arguments[v]:process.cwd();if(!P.isString(I))throw new TypeError("Arguments to path.resolve must be strings");I&&(d=I+"/"+d,f="/"===I[0])}return(f?"/":"")+(d=z(d.split("/"),!f).join("/"))||"."},G.normalize=function(d){var f=G.isAbsolute(d),v=d&&"/"===d[d.length-1];return!(d=z(d.split("/"),!f).join("/"))&&!f&&(d="."),d&&v&&(d+="/"),(f?"/":"")+d},G.isAbsolute=function(d){return"/"===d.charAt(0)},G.join=function(){for(var d="",f=0;f<arguments.length;f++){var v=arguments[f];if(!P.isString(v))throw new TypeError("Arguments to path.join must be strings");v&&(d+=d?"/"+v:v)}return G.normalize(d)},G.relative=function(d,f){d=G.resolve(d).substr(1),f=G.resolve(f).substr(1);for(var v=c(d.split("/")),I=c(f.split("/")),N=Math.min(v.length,I.length),T=N,J=0;J<N;J++)if(v[J]!==I[J]){T=J;break}var V=[];for(J=T;J<v.length;J++)V.push("..");return(V=V.concat(I.slice(T))).join("/")},G._makeLong=function(d){return d},G.dirname=function(d){var f=Ce(d),v=f[0],I=f[1];return v||I?(I&&(I=I.substr(0,I.length-1)),v+I):"."},G.basename=function(d,f){var v=Ce(d)[2];return f&&v.substr(-1*f.length)===f&&(v=v.substr(0,v.length-f.length)),v},G.extname=function(d){return Ce(d)[3]},G.format=function(d){if(!P.isObject(d))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof d);if(!P.isString(d.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof d.root);return(d.dir?d.dir+G.sep:"")+(d.base||"")},G.parse=function(d){if(!P.isString(d))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof d);var f=Ce(d);if(!f||4!==f.length)throw new TypeError("Invalid path '"+d+"'");return f[1]=f[1]||"",f[2]=f[2]||"",f[3]=f[3]||"",{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},G.sep="/",G.delimiter=":",ge.exports=L?K:G,ge.exports.posix=G,ge.exports.win32=K},28907:ge=>{ge.exports="function"==typeof Object.create?function(O,L){O.super_=L,O.prototype=Object.create(L.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}})}:function(O,L){O.super_=L;var P=function(){};P.prototype=L.prototype,O.prototype=new P,O.prototype.constructor=O}},11451:ge=>{ge.exports=function(O){return O&&"object"==typeof O&&"function"==typeof O.copy&&"function"==typeof O.fill&&"function"==typeof O.readUInt8}},26788:(ge,U,O)=>{var L=/%[sdj%]/g;U.format=function(l){if(!T(l)){for(var g=[],b=0;b<arguments.length;b++)g.push(c(arguments[b]));return g.join(" ")}b=1;for(var x=arguments,ne=x.length,F=String(l).replace(L,function(j){if("%%"===j)return"%";if(b>=ne)return j;switch(j){case"%s":return String(x[b++]);case"%d":return Number(x[b++]);case"%j":try{return JSON.stringify(x[b++])}catch{return"[Circular]"}default:return j}}),_=x[b];b<ne;_=x[++b])v(_)||!te(_)?F+=" "+_:F+=" "+c(_);return F},U.deprecate=function(l,g){if(V(global.process))return function(){return U.deprecate(l,g).apply(this,arguments)};if(!0===process.noDeprecation)return l;var b=!1;return function x(){if(!b){if(process.throwDeprecation)throw new Error(g);process.traceDeprecation?console.trace(g):console.error(g),b=!0}return l.apply(this,arguments)}};var z,P={};function c(l,g){var b={seen:[],stylize:be};return arguments.length>=3&&(b.depth=arguments[2]),arguments.length>=4&&(b.colors=arguments[3]),f(g)?b.showHidden=g:g&&U._extend(b,g),V(b.showHidden)&&(b.showHidden=!1),V(b.depth)&&(b.depth=2),V(b.colors)&&(b.colors=!1),V(b.customInspect)&&(b.customInspect=!0),b.colors&&(b.stylize=X),de(b,l,b.depth)}function X(l,g){var b=c.styles[g];return b?"\x1b["+c.colors[b][0]+"m"+l+"\x1b["+c.colors[b][1]+"m":l}function be(l,g){return l}function de(l,g,b){if(l.customInspect&&g&&w(g.inspect)&&g.inspect!==U.inspect&&(!g.constructor||g.constructor.prototype!==g)){var x=g.inspect(b,l);return T(x)||(x=de(l,x,b)),x}var ne=function ce(l,g){if(V(g))return l.stylize("undefined","undefined");if(T(g)){var b="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return l.stylize(b,"string")}return N(g)?l.stylize(""+g,"number"):f(g)?l.stylize(""+g,"boolean"):v(g)?l.stylize("null","null"):void 0}(l,g);if(ne)return ne;var F=Object.keys(g),_=function K(l){var g={};return l.forEach(function(b,x){g[b]=!0}),g}(F);if(l.showHidden&&(F=Object.getOwnPropertyNames(g)),p(g)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return ue(g);if(0===F.length){if(w(g))return l.stylize("[Function"+(g.name?": "+g.name:"")+"]","special");if(Q(g))return l.stylize(RegExp.prototype.toString.call(g),"regexp");if(we(g))return l.stylize(Date.prototype.toString.call(g),"date");if(p(g))return ue(g)}var _e,le="",$=!1,ae=["{","}"];return d(g)&&($=!0,ae=["[","]"]),w(g)&&(le=" [Function"+(g.name?": "+g.name:"")+"]"),Q(g)&&(le=" "+RegExp.prototype.toString.call(g)),we(g)&&(le=" "+Date.prototype.toUTCString.call(g)),p(g)&&(le=" "+ue(g)),0!==F.length||$&&0!=g.length?b<0?Q(g)?l.stylize(RegExp.prototype.toString.call(g),"regexp"):l.stylize("[Object]","special"):(l.seen.push(g),_e=$?function me(l,g,b,x,ne){for(var F=[],_=0,j=g.length;_<j;++_)ye(g,String(_))?F.push(G(l,g,b,x,String(_),!0)):F.push("");return ne.forEach(function(le){le.match(/^\d+$/)||F.push(G(l,g,b,x,le,!0))}),F}(l,g,b,_,F):F.map(function(xe){return G(l,g,b,_,xe,$)}),l.seen.pop(),function Ce(l,g,b){var ne=l.reduce(function(F,_){return _.indexOf("\n"),F+_.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ne>60?b[0]+(""===g?"":g+"\n ")+" "+l.join(",\n  ")+" "+b[1]:b[0]+g+" "+l.join(", ")+" "+b[1]}(_e,le,ae)):ae[0]+le+ae[1]}function ue(l){return"["+Error.prototype.toString.call(l)+"]"}function G(l,g,b,x,ne,F){var _,j,le;if((le=Object.getOwnPropertyDescriptor(g,ne)||{value:g[ne]}).get?j=l.stylize(le.set?"[Getter/Setter]":"[Getter]","special"):le.set&&(j=l.stylize("[Setter]","special")),ye(x,ne)||(_="["+ne+"]"),j||(l.seen.indexOf(le.value)<0?(j=v(b)?de(l,le.value,null):de(l,le.value,b-1)).indexOf("\n")>-1&&(j=F?j.split("\n").map(function($){return"  "+$}).join("\n").substr(2):"\n"+j.split("\n").map(function($){return"   "+$}).join("\n")):j=l.stylize("[Circular]","special")),V(_)){if(F&&ne.match(/^\d+$/))return j;(_=JSON.stringify(""+ne)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(_=_.substr(1,_.length-2),_=l.stylize(_,"name")):(_=_.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),_=l.stylize(_,"string"))}return _+": "+j}function d(l){return Array.isArray(l)}function f(l){return"boolean"==typeof l}function v(l){return null===l}function N(l){return"number"==typeof l}function T(l){return"string"==typeof l}function V(l){return void 0===l}function Q(l){return te(l)&&"[object RegExp]"===y(l)}function te(l){return"object"==typeof l&&null!==l}function we(l){return te(l)&&"[object Date]"===y(l)}function p(l){return te(l)&&("[object Error]"===y(l)||l instanceof Error)}function w(l){return"function"==typeof l}function y(l){return Object.prototype.toString.call(l)}function A(l){return l<10?"0"+l.toString(10):l.toString(10)}U.debuglog=function(l){if(V(z)&&(z=process.env.NODE_DEBUG||""),l=l.toUpperCase(),!P[l])if(new RegExp("\\b"+l+"\\b","i").test(z)){var g=process.pid;P[l]=function(){var b=U.format.apply(U,arguments);console.error("%s %d: %s",l,g,b)}}else P[l]=function(){};return P[l]},U.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},U.isArray=d,U.isBoolean=f,U.isNull=v,U.isNullOrUndefined=function I(l){return null==l},U.isNumber=N,U.isString=T,U.isSymbol=function J(l){return"symbol"==typeof l},U.isUndefined=V,U.isRegExp=Q,U.isObject=te,U.isDate=we,U.isError=p,U.isFunction=w,U.isPrimitive=function E(l){return null===l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||"symbol"==typeof l||typeof l>"u"},U.isBuffer=O(11451);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Z(){var l=new Date,g=[A(l.getHours()),A(l.getMinutes()),A(l.getSeconds())].join(":");return[l.getDate(),R[l.getMonth()],g].join(" ")}function ye(l,g){return Object.prototype.hasOwnProperty.call(l,g)}U.log=function(){console.log("%s - %s",Z(),U.format.apply(U,arguments))},U.inherits=O(28907),U._extend=function(l,g){if(!g||!te(g))return l;for(var b=Object.keys(g),x=b.length;x--;)l[b[x]]=g[b[x]];return l}}}]);